import{d as B,z as a,bC as _,b9 as H,bD as J,bE as X,bF as Q,W as Y,X as $,aW as F,p as v,ag as z,af as Z,ap as x,q as ee,bG as te,l as ne,a3 as R,aI as ae,v as q,y as C,a2 as re,ai as le,C as V,aB as L,al as I,bH as ie,bI as oe,bJ as U,bK as j,b6 as ue,aU as N}from"./index.85d3582f.js";import{A as M}from"./Add.32836a6c.js";import{R as se}from"./Remove.e20fb71e.js";import{A as ce}from"./ArrowDown.224587e2.js";var de=B({name:"ArrowUp",render(){return a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},a("g",{fill:"none"},a("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}});const pe=()=>Q,me=_({name:"DynamicInput",common:H,peers:{Input:J,Button:X},self:pe});var fe=me;const T=Y("n-dynamic-input");var he=B({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:n,placeholderRef:p}=$(T);return{mergedTheme:n,placeholder:p}},render(){const{mergedTheme:n,placeholder:p,value:i,clsPrefix:u,onUpdateValue:d}=this;return a("div",{class:`${u}-dynamic-input-preset-input`},a(F,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:i,placeholder:p,onUpdateValue:d}))}}),ye=B({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(n){const{mergedThemeRef:p,keyPlaceholderRef:i,valuePlaceholderRef:u}=$(T);return{mergedTheme:p,keyPlaceholder:i,valuePlaceholder:u,handleKeyInput(d){n.onUpdateValue({key:d,value:n.value.value})},handleValueInput(d){n.onUpdateValue({key:n.value.key,value:d})}}},render(){const{mergedTheme:n,keyPlaceholder:p,valuePlaceholder:i,value:u,clsPrefix:d}=this;return a("div",{class:`${d}-dynamic-input-preset-pair`},a(F,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:u.key,class:`${d}-dynamic-input-pair-input`,placeholder:p,onUpdateValue:this.handleKeyInput}),a(F,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:u.value,class:`${d}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleValueInput}))}}),ve=v("dynamic-input",{width:"100%"},[v("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[v("dynamic-input-preset-input",{flex:1,alignItems:"center"}),v("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[v("dynamic-input-pair-input",[z("&:first-child",{"margin-right":"12px"})])]),Z("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[x("icon",{cursor:"pointer"})]),z("&:last-child",{marginBottom:0})]),v("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[v("form-item-blank",{paddingTop:"0 !important"})])]);const S=new WeakMap,ge=Object.assign(Object.assign({},q.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]});var ke=B({name:"DynamicInput",props:ge,setup(n,{slots:p}){const{NConfigProvider:i,mergedClsPrefixRef:u}=ee(),d=$(te,null),s=ne(n.defaultValue),g=R(n,"value"),f=ae(g,s),b=q("DynamicInput","-dynamic-input",ve,fe,n,u),k=C(()=>{const{value:e}=f;if(Array.isArray(e)){const{max:t}=n;return t!==void 0&&e.length>=t}return!1}),c=C(()=>{const{value:e}=f;return Array.isArray(e)?e.length<=n.min:!0}),w=C(()=>{var e,t;return(t=(e=i==null?void 0:i.mergedComponentPropsRef.value)===null||e===void 0?void 0:e.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function m(e){const{onInput:t,"onUpdate:value":l,onUpdateValue:r}=n;t&&N(t,e),l&&N(l,e),r&&N(r,e),s.value=e}function D(e,t){if(e==null||typeof e!="object")return t;const l=U(e)?j(e):e;let r=S.get(l);return r===void 0&&S.set(l,r=ue()),r}function O(e,t){const{value:l}=f,r=Array.from(l!=null?l:[]),h=r[e];if(r[e]=t,h&&t&&typeof h=="object"&&typeof t=="object"){const E=U(h)?j(h):h,G=U(t)?j(t):t,K=S.get(E);K!==void 0&&S.set(G,K)}m(r)}function A(){y(0)}function y(e){const{value:t}=f,{onCreate:l}=n,r=Array.from(t!=null?t:[]);if(l)r.splice(e+1,0,l(e+1)),m(r);else if(p.default)r.splice(e+1,0,null),m(r);else switch(n.preset){case"input":r.splice(e+1,0,""),m(r);break;case"pair":r.splice(e+1,0,{key:"",value:""}),m(r);break}}function o(e){const{value:t}=f;if(!Array.isArray(t))return;const{min:l}=n;if(t.length<=l)return;const r=Array.from(t);r.splice(e,1),m(r);const{onRemove:h}=n;h&&h(e)}function P(e,t,l){if(t<0||l<0||t>=e.length||l>=e.length||t===l)return;const r=e[t];e[t]=e[l],e[l]=r}function W(e,t){const{value:l}=f;if(!Array.isArray(l))return;const r=Array.from(l);e==="up"&&P(r,t,t-1),e==="down"&&P(r,t,t+1),m(r)}return re(T,{mergedThemeRef:b,keyPlaceholderRef:R(n,"keyPlaceholder"),valuePlaceholderRef:R(n,"valuePlaceholder"),placeholderRef:R(n,"placeholder")}),{locale:le("DynamicInput").localeRef,buttonSize:w,mergedClsPrefix:u,NFormItem:d,uncontrolledValue:s,mergedValue:f,insertionDisabled:k,removeDisabled:c,handleCreateClick:A,ensureKey:D,handleValueChange:O,remove:o,move:W,createItem:y,mergedTheme:b,cssVars:C(()=>{const{self:{actionMargin:e}}=b.value;return{"--action-margin":e}})}},render(){const{$slots:n,buttonSize:p,mergedClsPrefix:i,mergedValue:u,locale:d,mergedTheme:s,keyField:g,itemStyle:f,preset:b,showSortButton:k,NFormItem:c,ensureKey:w,handleValueChange:m,remove:D,createItem:O,move:A}=this;return a("div",{class:`${i}-dynamic-input`,style:this.cssVars},!Array.isArray(u)||u.length===0?a(V,Object.assign({block:!0,ghost:!0,dashed:!0,size:p},this.createButtonProps,{disabled:this.insertionDisabled,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>L(n["create-button-default"],()=>[d.create]),icon:()=>L(n["create-button-icon"],()=>[a(I,{clsPrefix:i},{default:()=>a(M,null)})])}):u.map((y,o)=>a("div",{key:g?y[g]:w(y,o),"data-key":g?y[g]:w(y,o),class:`${i}-dynamic-input-item`,style:f},ie(n.default,{value:u[o],index:o},()=>[b==="input"?a(he,{clsPrefix:i,value:u[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:P=>m(o,P)}):b==="pair"?a(ye,{clsPrefix:i,value:u[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:P=>m(o,P)}):null]),a("div",{class:`${i}-dynamic-input-item__action`},a(oe,{size:p},{default:()=>[a(V,{disabled:this.removeDisabled,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,circle:!0,onClick:()=>D(o)},{icon:()=>a(I,{clsPrefix:i},{default:()=>a(se,null)})}),a(V,{disabled:this.insertionDisabled,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>O(o)},{icon:()=>a(I,{clsPrefix:i},{default:()=>a(M,null)})}),k?a(V,{disabled:o===0,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>A("up",o)},{icon:()=>a(I,{clsPrefix:i},{default:()=>a(de,null)})}):null,k?a(V,{disabled:o===u.length-1,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>A("down",o)},{icon:()=>a(I,{clsPrefix:i},{default:()=>a(ce,null)})}):null]})))))}});export{ke as N};
