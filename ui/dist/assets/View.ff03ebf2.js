import{d as ye,k as be,bW as he,u as _e,l as T,y as S,V as z,m as ge,o as n,c as v,b as i,w as u,e,C as N,N as ke,i as f,t as s,a as p,g as m,h as r,f as k,Q as b,T as _,z as we,c3 as Pe}from"./index.85d3582f.js";import{X as $e}from"./PageHeader.556c52c2.js";import{_ as X}from"./Anchor.d96a0ee7.js";import{X as g}from"./PairTag.0563def6.js";import{_ as ze}from"./Logs.d491a566.js";import{_ as xe}from"./Dashboard.7fb83a0e.js";import{X as w}from"./Panel.5fe42ab1.js";import{X as te}from"./Code.85cde3b3.js";import{X as C,_ as y}from"./DescriptionItem.136d9c3a.js";import{s as D}from"./service.387f6f1f.js";import{t as Ae}from"./task.4e1c63e8.js";import{B as Ne}from"./ArrowBackCircleOutline.f4323d84.js";import{N as E,a as Te}from"./Tabs.cb7015dd.js";import{N as P}from"./Tag.04c651c7.js";import{N as x}from"./Table.e4fc5dbd.js";import{N as Ce}from"./Alert.c18a4d49.js";import{N as De}from"./InputNumber.d1b1db42.js";import"./container.c3b8b557.js";import"./Switch.f4840aa3.js";import"./index.9d2bf9c2.js";import"./CloseOutline.b801982a.js";import"./chart.4edba4f5.js";import"./Select.60c05ccc.js";import"./AddOutline.f0719097.js";import"./SaveOutline.608b2aa9.js";import"./Grid.4637279d.js";import"./DataTable.20b75ea0.js";import"./ArrowDown.224587e2.js";import"./Checkbox.1898d3a6.js";import"./RadioGroup.5ac456f1.js";import"./Radio.10d2e386.js";import"./hr.a93a0821.js";import"./CopyOutline.e34332fe.js";import"./Add.32836a6c.js";import"./Remove.e20fb71e.js";const Ee={class:"page-body"},je=r("th",null,"UID",-1),Ie=r("th",null,"GID",-1),Se=r("th",null,"UID",-1),Xe=r("th",null,"GID",-1),_l=ye({setup(Be){const{t:l}=be(),ue=he(),re=_e(),a=T({resource:{limit:{},reserve:{}},placement:{},updatePolicy:{},rollbackPolicy:{},restartPolicy:{},logDriver:{},dns:{}}),B=T([]),V=T(""),j=T(!1),L=T(""),se=S(()=>{const t=a.value.updatePolicy;return t.parallelism||t.delay||t.failureAction||t.order}),ne=S(()=>{const t=a.value.rollbackPolicy;return t.parallelism||t.delay||t.failureAction||t.order}),ie=S(()=>{const t=a.value.restartPolicy;return t.condition||t.delay||t.maxAttempts||t.window}),oe=S(()=>{const t=a.value.dns;return!z(a.value.hosts,t.servers,t.search,t.options)});function de(){window.dialog.warning({title:l("dialogs.restart_service.title"),content:l("dialogs.restart_service.body"),positiveText:l("buttons.confirm"),negativeText:l("buttons.cancel"),onPositiveClick:async()=>{D.restart(a.value.name),window.message.success(l("texts.action_success")),I()}})}function ce(){window.dialog.warning({title:l("dialogs.rollback_service.title"),content:l("dialogs.rollback_service.body"),positiveText:l("buttons.confirm"),negativeText:l("buttons.cancel"),onPositiveClick:async()=>{D.rollback(a.value.name),window.message.success(l("texts.action_success")),I()}})}function pe(){const t=T(a.value.replicas);window.dialog.warning({title:l("dialogs.scale_service.title"),content:()=>we(De,{min:0,defaultValue:t}),positiveText:l("buttons.confirm"),negativeText:l("buttons.cancel"),onPositiveClick:async()=>{D.scale(a.value.name,t.value,a.value.version),window.message.success(l("texts.action_success")),I()}})}function me(){window.dialog.warning({title:l("dialogs.remove_service.title"),content:l("dialogs.remove_service.body"),positiveText:l("buttons.confirm"),negativeText:l("buttons.cancel"),onPositiveClick:async()=>{D.delete(a.value.name),window.message.success(l("texts.action_success")),Pe.push({name:"service_list"})}})}function fe(t){var o,h,A,O,R,U,F,G,H,M,Q,W,q,J,K,Y,Z,ee,le,ae;const d=new Array;return d.push("docker service create"),d.push(`--name ${t.name}`),t.dir&&d.push(`--workdir ${t.dir}`),t.user&&d.push(`--workdir ${t.user}`),t.hostname&&d.push(`--hostname ${t.hostname}`),t.mode!=="replicated"&&d.push(`--mode ${t.mode}`),t.replicas>1&&d.push(`--replicas ${t.replicas}`),t.networks.forEach(c=>{const $=t.endpoint.vips.find(ve=>ve.id===c);$&&d.push(`--network ${$.name}`)}),t.endpoint.ports&&t.endpoint.ports.length&&(t.endpoint.mode!=="vip"&&d.push(`--endpoint-mode ${t.endpoint.mode}`),t.endpoint.ports.forEach(c=>{d.push(`--publish mode=${c.mode},target=${c.targetPort},published=${c.publishedPort},protocol=${c.protocol}`)})),(o=t.placement.constraints)==null||o.forEach(c=>d.push(`--constraint '${c.name} ${c.op} ${c.value}'`)),(h=t.placement.preferences)==null||h.forEach(c=>d.push(`--placement-pref '${c}'`)),(A=t.env)==null||A.forEach(c=>d.push(`--env '${c.name}=${c.value}'`)),(O=t.labels)==null||O.forEach(c=>d.push(`--label '${c.name}=${c.value}'`)),(R=t.containerLabels)==null||R.forEach(c=>d.push(`--container-label '${c.name}=${c.value}'`)),(U=t.mounts)==null||U.forEach(c=>{let $=`--mount type=${c.type},source=${c.source},destination=${c.target}`;c.readonly&&($+=",ro=1"),d.push($)}),(F=t.configs)==null||F.forEach(c=>{const $=c.key.substring(c.key.indexOf(":")+1);d.push(`--config source=${$},target=${c.path},mode=0${c.mode}`)}),(G=t.secrets)==null||G.forEach(c=>{const $=c.key.substring(c.key.indexOf(":")+1);d.push(`--secret source=${$},target=${c.path},mode=0${c.mode}`)}),((H=t.resource.limit)==null?void 0:H.cpu)>0&&d.push(`--limit-cpu ${t.resource.limit.cpu}`),(M=t.resource.limit)!=null&&M.memory&&d.push(`--limit-memory ${t.resource.limit.memory.replace(/\s*/g,"")}`),((Q=t.resource.reserve)==null?void 0:Q.cpu)>0&&d.push(`--reserve-cpu ${t.resource.reserve.cpu}`),(W=t.resource.reserve)!=null&&W.memory&&d.push(`--reserve-memory ${t.resource.reserve.memory.replace(/\s*/g,"")}`),t.logDriver.name&&(d.push(`--log-driver ${t.logDriver.name}`),(q=t.logDriver.options)==null||q.forEach(c=>d.push(`--log-opt '${c.name}=${c.value}'`))),t.updatePolicy.parallelism&&d.push(`--update-parallelism ${t.updatePolicy.parallelism}`),t.updatePolicy.delay&&d.push(`--update-delay ${t.updatePolicy.delay}`),t.updatePolicy.failureAction&&d.push(`--update-failure-action ${t.updatePolicy.failureAction}`),t.updatePolicy.order&&d.push(`--update-order ${t.updatePolicy.order}`),t.rollbackPolicy.parallelism&&d.push(`--rollback-parallelism ${t.rollbackPolicy.parallelism}`),t.rollbackPolicy.delay&&d.push(`--rollback-delay ${t.rollbackPolicy.delay}`),t.rollbackPolicy.failureAction&&d.push(`--rollback-failure-action ${t.rollbackPolicy.failureAction}`),t.rollbackPolicy.order&&d.push(`--rollback-order ${t.rollbackPolicy.order}`),t.restartPolicy.condition&&d.push(`--restart-condition ${t.restartPolicy.condition}`),t.restartPolicy.delay&&d.push(`--restart-delay ${t.restartPolicy.delay}`),t.restartPolicy.maxAttempts&&d.push(`--restart-max-attempts ${t.restartPolicy.maxAttempts}`),t.restartPolicy.window&&d.push(`--restart-window ${t.restartPolicy.window}`),(J=t.hosts)==null||J.forEach(c=>d.push(`--host ${c}`)),(Y=(K=t.dns)==null?void 0:K.servers)==null||Y.forEach(c=>d.push(`--dns ${c}`)),(ee=(Z=t.dns)==null?void 0:Z.search)==null||ee.forEach(c=>d.push(`--dns-search ${c}`)),(ae=(le=t.dns)==null?void 0:le.options)==null||ae.forEach(c=>d.push(`--dns-option ${c}`)),d.push(t.image),t.command&&d.push(t.command),t.args&&d.push(t.args),d.join(` \\
    `)}async function I(){var o,h,A;const t=ue.params.name;let d=await Promise.all([D.find(t,!0),Ae.search({service:t,pageIndex:1,pageSize:100})]);a.value=(o=d[0].data)==null?void 0:o.service,V.value=(h=d[0].data)==null?void 0:h.raw,B.value=(A=d[1].data)==null?void 0:A.items,L.value=fe(a.value)}return ge(I),(t,d)=>(n(),v(b,null,[i($e,{subtitle:a.value.name},{action:u(()=>[i(e(N),{secondary:"",size:"small",onClick:d[0]||(d[0]=o=>t.$router.push({name:"service_list"}))},{icon:u(()=>[i(e(ke),null,{default:u(()=>[i(e(Ne))]),_:1})]),default:u(()=>[f(" "+s(e(l)("buttons.return")),1)]),_:1}),a.value.mode==="replicated"||a.value.mode==="replicated-job"?(n(),p(e(N),{key:0,secondary:"",size:"small",onClick:pe},{default:u(()=>[f(s(e(l)("buttons.scale")),1)]),_:1})):m("",!0),i(e(N),{secondary:"",size:"small",onClick:de},{default:u(()=>[f(s(e(l)("buttons.restart")),1)]),_:1}),i(e(N),{secondary:"",size:"small",onClick:ce,type:"warning"},{default:u(()=>[f(s(e(l)("buttons.rollback")),1)]),_:1}),i(e(N),{secondary:"",size:"small",onClick:me,type:"error"},{default:u(()=>[f(s(e(l)("buttons.delete")),1)]),_:1}),i(e(N),{secondary:"",size:"small",onClick:d[1]||(d[1]=o=>t.$router.push({name:"service_edit",params:{name:a.value.name}}))},{default:u(()=>[f(s(e(l)("buttons.edit")),1)]),_:1})]),_:1},8,["subtitle"]),r("div",Ee,[i(e(Te),{type:"line",style:{"margin-top":"-12px"}},{default:u(()=>[i(e(E),{name:"detail",tab:e(l)("fields.detail")},{default:u(()=>[i(e(k),{vertical:"",size:16},{default:u(()=>[i(e(C),{"label-placement":"left","label-align":"right","label-width":100},{default:u(()=>{var o;return[i(e(y),{label:e(l)("fields.id")},{default:u(()=>[f(s(a.value.id),1)]),_:1},8,["label"]),i(e(y),{label:e(l)("fields.name")},{default:u(()=>[f(s(a.value.name),1)]),_:1},8,["label"]),i(e(y),{label:e(l)("objects.image"),span:2},{default:u(()=>[f(s(a.value.image),1)]),_:1},8,["label"]),i(e(y),{label:e(l)("fields.mode")},{default:u(()=>[i(e(P),{round:"",size:"small",type:["replicated","replicated-job"].includes(a.value.mode)?"info":"error"},{default:u(()=>[f(s(a.value.mode),1)]),_:1},8,["type"])]),_:1},8,["label"]),i(e(y),{label:e(l)("objects.task",2)},{default:u(()=>[i(e(P),{round:"",size:"small",type:a.value.runningTasks===a.value.desiredTasks?"success":"error"},{default:u(()=>[f(s(a.value.runningTasks+"/"+a.value.desiredTasks),1)]),_:1},8,["type"])]),_:1},8,["label"]),a.value.command?(n(),p(e(y),{key:0,label:e(l)("fields.command"),span:2},{default:u(()=>[f(s(a.value.command),1)]),_:1},8,["label"])):m("",!0),a.value.args?(n(),p(e(y),{key:1,label:e(l)("fields.args"),span:2},{default:u(()=>[f(s(a.value.args),1)]),_:1},8,["label"])):m("",!0),a.value.dir?(n(),p(e(y),{key:2,label:e(l)("fields.work_dir")},{default:u(()=>[f(s(a.value.dir),1)]),_:1},8,["label"])):m("",!0),a.value.user?(n(),p(e(y),{key:3,label:e(l)("fields.user")},{default:u(()=>[f(s(a.value.user),1)]),_:1},8,["label"])):m("",!0),i(e(y),{label:e(l)("fields.created_at")},{default:u(()=>[f(s(a.value.createdAt),1)]),_:1},8,["label"]),i(e(y),{label:e(l)("fields.updated_at")},{default:u(()=>[f(s(a.value.updatedAt),1)]),_:1},8,["label"]),(o=a.value.update)!=null&&o.state?(n(),p(e(y),{key:4,label:e(l)("fields.update_state")},{default:u(()=>[i(e(P),{round:"",size:"small",type:a.value.update.state==="completed"?"success":"error"},{default:u(()=>[f(s(a.value.update.state),1)]),_:1},8,["type"])]),_:1},8,["label"])):m("",!0)]}),_:1}),i(w,{title:e(l)("fields.cli"),collapsed:!j.value},{action:u(()=>[i(e(N),{secondary:"",size:"small",onClick:d[2]||(d[2]=o=>j.value=!j.value)},{default:u(()=>[f(s(j.value?e(l)("buttons.collapse"):e(l)("buttons.expand")),1)]),_:1})]),default:u(()=>[i(te,{code:L.value,language:"bash"},null,8,["code"])]),_:1},8,["title","collapsed"]),e(z)(a.value.env)?m("",!0):(n(),p(w,{key:0,title:e(l)("fields.env")},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.name")),1),r("th",null,s(e(l)("fields.value")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.env,o=>(n(),v("tr",null,[r("td",null,s(o.name),1),r("td",null,s(o.value),1)]))),256))])]),_:1})]),_:1},8,["title"])),e(z)(a.value.labels)?m("",!0):(n(),p(w,{key:1,title:e(l)("fields.labels")},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.name")),1),r("th",null,s(e(l)("fields.value")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.labels,o=>(n(),v("tr",null,[r("td",null,s(o.name),1),r("td",null,s(o.value),1)]))),256))])]),_:1})]),_:1},8,["title"])),i(w,{title:e(l)("objects.network",2)},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>{var o;return[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.name")),1),r("th",null,s(e(l)("fields.address")),1)])]),r("tbody",null,[(n(!0),v(b,null,_((o=a.value.endpoint)==null?void 0:o.vips,h=>(n(),v("tr",null,[r("td",null,[i(X,{url:{name:"network_detail",params:{name:h.name||h.id}}},{default:u(()=>[f(s(h.name||h.id),1)]),_:2},1032,["url"])]),r("td",null,s(h.ip),1)]))),256))])]}),_:1})]),_:1},8,["title"]),e(z)(a.value.configs)?m("",!0):(n(),p(w,{key:2,title:e(l)("objects.config",2)},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1,style:{width:"100%"}},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.filename")),1),r("th",null,s(e(l)("fields.target_path")),1),je,Ie,r("th",null,s(e(l)("fields.mode")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.configs,o=>(n(),v("tr",null,[r("td",null,s(o.key.substring(o.key.indexOf(":")+1)),1),r("td",null,s(o.path),1),r("td",null,s(o.uid),1),r("td",null,s(o.gid),1),r("td",null,s(o.mode),1)]))),256))])]),_:1})]),_:1},8,["title"])),e(z)(a.value.secrets)?m("",!0):(n(),p(w,{key:3,title:e(l)("objects.secret",2)},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.filename")),1),r("th",null,s(e(l)("fields.target_path")),1),Se,Xe,r("th",null,s(e(l)("fields.mode")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.secrets,o=>(n(),v("tr",null,[r("td",null,s(o.key.substring(o.key.indexOf(":")+1)),1),r("td",null,s(o.path),1),r("td",null,s(o.uid),1),r("td",null,s(o.gid),1),r("td",null,s(o.mode),1)]))),256))])]),_:1})]),_:1},8,["title"])),e(z)(a.value.mounts)?m("",!0):(n(),p(w,{key:4,title:e(l)("fields.mounts")},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.type")),1),r("th",null,s(e(l)("fields.source_path")),1),r("th",null,s(e(l)("fields.target_path")),1),r("th",null,s(e(l)("fields.readonly")),1),r("th",null,s(e(l)("fields.consistency")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.mounts,o=>(n(),v("tr",null,[r("td",null,s(o.type),1),r("td",null,s(o.source),1),r("td",null,s(o.target),1),r("td",null,[i(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o.readonly?"\u662F":"\u5426"),1)]),_:2},1024)]),r("td",null,s(o.consistency),1)]))),256))])]),_:1})]),_:1},8,["title"])),i(w,{title:e(l)("fields.resources")},{default:u(()=>[i(e(C),{"label-align":"left","label-width":40},{default:u(()=>[a.value.resource.limit.cpu&&a.value.resource.limit.memory?(n(),p(e(y),{key:0,label:e(l)("fields.limit")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[i(g,{type:"warning",label:e(l)("fields.cpu"),value:a.value.resource.limit.cpu.toString()},null,8,["label","value"]),i(g,{type:"warning",label:e(l)("fields.memory"),value:a.value.resource.limit.memory},null,8,["label","value"])]),_:1})]),_:1},8,["label"])):m("",!0),a.value.resource.reserve.cpu&&a.value.resource.reserve.memory?(n(),p(e(y),{key:1,label:e(l)("fields.reserve")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[i(g,{type:"success",label:e(l)("fields.cpu"),value:a.value.resource.reserve.cpu.toString()},null,8,["label","value"]),i(g,{type:"success",label:e(l)("fields.memory"),value:a.value.resource.reserve.memory},null,8,["label","value"])]),_:1})]),_:1},8,["label"])):m("",!0)]),_:1})]),_:1},8,["title"]),i(w,{title:e(l)("fields.placement")},{default:u(()=>[i(e(C),{"label-align":"left",cols:"1","label-width":40},{default:u(()=>[a.value.placement.constraints&&a.value.placement.constraints.length?(n(),p(e(y),{key:0,label:e(l)("fields.constraints")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.placement.constraints,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o.name+" "+o.op+" "+o.value),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0),a.value.placement.preferences&&a.value.placement.preferences.length?(n(),p(e(y),{key:1,label:e(l)("fields.preferences")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.placement.preferences,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0)]),_:1})]),_:1},8,["title"]),i(w,{title:e(l)("fields.schedule")},{default:u(()=>[i(e(C),{"label-align":"left",cols:"1","label-width":40},{default:u(()=>[e(se)?(n(),p(e(y),{key:0,label:e(l)("fields.update")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[a.value.updatePolicy.parallelism?(n(),p(g,{key:0,type:"warning",label:e(l)("fields.parallelism"),value:a.value.updatePolicy.parallelism.toString()},null,8,["label","value"])):m("",!0),a.value.updatePolicy.delay?(n(),p(g,{key:1,type:"warning",label:e(l)("fields.delay"),value:a.value.updatePolicy.delay},null,8,["label","value"])):m("",!0),a.value.updatePolicy.failureAction?(n(),p(g,{key:2,type:"warning",label:e(l)("fields.failure_action"),value:a.value.updatePolicy.failureAction},null,8,["label","value"])):m("",!0),a.value.updatePolicy.order?(n(),p(g,{key:3,type:"warning",label:e(l)("fields.order"),value:a.value.updatePolicy.order},null,8,["label","value"])):m("",!0)]),_:1})]),_:1},8,["label"])):m("",!0),e(ne)?(n(),p(e(y),{key:1,label:e(l)("fields.rollback")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[a.value.rollbackPolicy.parallelism?(n(),p(g,{key:0,type:"warning",label:e(l)("fields.parallelism"),value:a.value.rollbackPolicy.parallelism.toString()},null,8,["label","value"])):m("",!0),a.value.rollbackPolicy.delay?(n(),p(g,{key:1,type:"warning",label:e(l)("fields.delay"),value:a.value.rollbackPolicy.delay},null,8,["label","value"])):m("",!0),a.value.rollbackPolicy.failureAction?(n(),p(g,{key:2,type:"warning",label:e(l)("fields.failure_action"),value:a.value.rollbackPolicy.failureAction},null,8,["label","value"])):m("",!0),a.value.rollbackPolicy.order?(n(),p(g,{key:3,type:"warning",label:e(l)("fields.order"),value:a.value.rollbackPolicy.order},null,8,["label","value"])):m("",!0)]),_:1})]),_:1},8,["label"])):m("",!0),e(ie)?(n(),p(e(y),{key:2,label:e(l)("fields.restart")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[a.value.restartPolicy.condition?(n(),p(g,{key:0,type:"warning",label:e(l)("fields.condition"),value:a.value.restartPolicy.condition},null,8,["label","value"])):m("",!0),a.value.restartPolicy.maxAttempts?(n(),p(g,{key:1,type:"warning",label:e(l)("fields.max_attempts"),value:a.value.restartPolicy.maxAttempts.toString()},null,8,["label","value"])):m("",!0),a.value.restartPolicy.delay?(n(),p(g,{key:2,type:"warning",label:e(l)("fields.delay"),value:a.value.restartPolicy.delay},null,8,["label","value"])):m("",!0),a.value.restartPolicy.window?(n(),p(g,{key:3,type:"warning",label:e(l)("fields.window"),value:a.value.restartPolicy.window},null,8,["label","value"])):m("",!0)]),_:1})]),_:1},8,["label"])):m("",!0)]),_:1})]),_:1},8,["title"]),a.value.logDriver.name?(n(),p(w,{key:5,title:e(l)("fields.log_driver")},{default:u(()=>[i(e(C),{"label-align":"left",cols:"1","label-width":40},{default:u(()=>[i(e(y),{label:e(l)("fields.name")},{default:u(()=>[f(s(a.value.logDriver.name),1)]),_:1},8,["label"])]),_:1}),e(z)(a.value.logDriver.options)?m("",!0):(n(),p(e(x),{key:0,size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.name")),1),r("th",null,s(e(l)("fields.value")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.logDriver.options,o=>(n(),v("tr",null,[r("td",null,s(o.name),1),r("td",null,s(o.value),1)]))),256))])]),_:1}))]),_:1},8,["title"])):m("",!0),e(z)(a.value.containerLabels)?m("",!0):(n(),p(w,{key:6,title:e(l)("fields.container_labels")},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.name")),1),r("th",null,s(e(l)("fields.value")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(a.value.containerLabels,o=>(n(),v("tr",null,[r("td",null,s(o.name),1),r("td",null,s(o.value),1)]))),256))])]),_:1})]),_:1},8,["title"])),e(oe)?(n(),p(w,{key:7,title:"DNS"},{default:u(()=>[i(e(C),{"label-align":"left",cols:"1","label-width":40},{default:u(()=>[a.value.hosts&&a.value.hosts.length?(n(),p(e(y),{key:0,label:e(l)("fields.hosts")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.hosts,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0),a.value.dns.servers&&a.value.dns.servers.length?(n(),p(e(y),{key:1,label:e(l)("fields.dns_servers")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.dns.servers,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0),a.value.dns.search&&a.value.dns.search.length?(n(),p(e(y),{key:2,label:e(l)("fields.dns_search")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.dns.search,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0),a.value.dns.options&&a.value.dns.options.length?(n(),p(e(y),{key:3,label:e(l)("fields.options")},{default:u(()=>[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(a.value.dns.options,o=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>[f(s(o),1)]),_:2},1024))),256))]),_:1})]),_:1},8,["label"])):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["tab"]),i(e(E),{name:"raw",tab:e(l)("fields.raw")},{default:u(()=>[i(te,{code:V.value,language:"json"},null,8,["code"])]),_:1},8,["tab"]),i(e(E),{name:"task",tab:e(l)("objects.task",2)},{default:u(()=>[i(e(x),{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[r("thead",null,[r("tr",null,[r("th",null,s(e(l)("fields.id")),1),r("th",null,s(e(l)("fields.state")),1),r("th",null,s(e(l)("objects.node")),1),r("th",null,s(e(l)("objects.network",2)),1),r("th",null,s(e(l)("fields.updated_at")),1)])]),r("tbody",null,[(n(!0),v(b,null,_(B.value,o=>(n(),v("tr",null,[r("td",null,[i(X,{url:{name:"task_detail",params:{id:o.id}}},{default:u(()=>[f(s(o.id),1)]),_:2},1032,["url"])]),r("td",null,[i(e(P),{round:"",size:"small",type:o.state==="running"?"success":"error"},{default:u(()=>[f(s(o.state),1)]),_:2},1032,["type"])]),r("td",null,[i(X,{url:{name:"node_detail",params:{id:o.nodeId}}},{default:u(()=>[f(s(o.nodeName),1)]),_:2},1032,["url"])]),r("td",null,[i(e(k),{size:4},{default:u(()=>[(n(!0),v(b,null,_(o.networks,h=>(n(),p(e(P),{round:"",size:"small"},{default:u(()=>{var A;return[f(s(e(z)(h.ips)?h.name:h.name+": "+((A=h.ips)==null?void 0:A.join(","))),1)]}),_:2},1024))),256))]),_:2},1024)]),r("td",null,s(o.updatedAt),1)]))),256))])]),_:1})]),_:1},8,["tab"]),i(e(E),{name:"logs",tab:e(l)("fields.logs"),"display-directive":"show:lazy"},{default:u(()=>[e(re).getters.allow("service.logs")?(n(),p(ze,{key:0,type:"service",id:a.value.name},null,8,["id"])):(n(),p(e(Ce),{key:1,type:"info"},{default:u(()=>[f(s(e(l)("texts.403")),1)]),_:1}))]),_:1},8,["tab"]),i(e(E),{name:"status",tab:e(l)("fields.status")},{default:u(()=>[i(xe,{type:"service",name:a.value.name},null,8,["name"])]),_:1},8,["tab"])]),_:1})])],64))}});export{_l as default};
