import{_ as ne,d as Y,u as re,o as w,c as j,t as f,g as R,r as ie,n as pe,e,k as ve,bW as fe,l as P,y as me,bk as ce,bo as T,bm as be,m as he,b as l,w as a,C as $,N as W,i as p,bp as ye,aW as i,a as B,f as q,Q as F,T as E,j as g,O as y,c2 as _e,D as ge,h as C,c3 as Ue}from"./index.85d3582f.js";import{X as ke}from"./PageHeader.556c52c2.js";import{X as we}from"./Panel.5fe42ab1.js";import{s as Q}from"./service.387f6f1f.js";import{c as xe}from"./config.6c9985f6.js";import{s as Pe}from"./secret.af3de4cb.js";import{n as Ne}from"./network.579b8bcd.js";import{B as De}from"./ArrowBackCircleOutline.f4323d84.js";import{N as Ie,a as K}from"./Checkbox.1898d3a6.js";import{S as je}from"./SaveOutline.608b2aa9.js";import{a as U}from"./Grid.4637279d.js";import{N as r}from"./FormItemGridItem.2cbaea10.js";import{N as k}from"./RadioGroup.5ac456f1.js";import{N as v}from"./Radio.10d2e386.js";import{N as h}from"./InputNumber.d1b1db42.js";import{N as m}from"./DynamicInput.74e0089b.js";import{N as I}from"./InputGroup.0f983dd9.js";import{N as x}from"./Select.60c05ccc.js";import{a as Ae,N as _}from"./Tabs.cb7015dd.js";import{N as Ce}from"./Alert.c18a4d49.js";import"./hr.a93a0821.js";import"./Remove.e20fb71e.js";import"./Add.32836a6c.js";import"./ArrowDown.224587e2.js";import"./Tag.04c651c7.js";const Ge={key:0,class:"title"},Se=Y({props:{title:{type:String}},setup(G){const o=re();return(S,d)=>(w(),j("fieldset",{class:pe(["group",e(o).state.preference.theme==="dark"?"dark":"light"])},[G.title?(w(),j("legend",Ge,f(G.title),1)):R("",!0),ie(S.$slots,"default",{},void 0,!0)],2))}});var N=ne(Se,[["__scopeId","data-v-21369fce"]]);const Te=p("Replicated"),$e=p("Global"),Be=p("Replicated Job"),Fe=p("Global Job"),Re=C("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),ze=C("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),Me=p("VIP"),Ve=p("DNSRR"),Le=p("UID"),Xe=p("GID"),Oe=p("Mode"),He=p("UID"),Je=p("GID"),We=p("Mode"),qe=p("Any"),Ee=p("On failure"),Qe=p("None"),Ke=C("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),Ye=C("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),xl=Y({setup(G){const{t:o}=ve(),S=fe(),d=P({replicas:1,endpoint:{},updatePolicy:{},rollbackPolicy:{},restartPolicy:{},logDriver:{},resource:{limit:{},reserve:{}},placement:{},dns:{}}),z=me(()=>{var b,u;return(u=(b=d.value.labels)==null?void 0:b.find(t=>t.name==="com.docker.stack.namespace"))==null?void 0:u.value}),D=P(!1),Z={name:ce(),mounts:T((b,u)=>u==null?void 0:u.every(t=>t.source&&t.target),o("tips.mounts_rule")),configs:T((b,u)=>u==null?void 0:u.every(t=>t.key&&t.path),o("tips.files_rule")),secrets:T((b,u)=>u==null?void 0:u.every(t=>t.key&&t.path),o("tips.files_rule"))},ee=[{label:"Bind",value:"bind"},{label:"Volume",value:"volume"},{label:"Tmpfs",value:"tmpfs"},{label:"NamedPipe",value:"npipe"}],le=[{label:"Default",value:"default"},{label:"Full",value:"consistent"},{label:"Cached",value:"cached"},{label:"Delegated",value:"delegated"}],ae=[{label:"default",value:""},{label:"json-file",value:"json-file"},{label:"syslog",value:"syslog"},{label:"journald",value:"journald"},{label:"gelf",value:"gelf"},{label:"fluentd",value:"fluentd"},{label:"awslogs",value:"awslogs"},{label:"splunk",value:"splunk"},{label:"etwlogs",value:"etwlogs"},{label:"gcplogs",value:"gcplogs"},{label:"none",value:"none"}],M=P([]),V=P(),L=P(),X=P(),{submit:te,submiting:O}=be(X,()=>Q.save(d.value),()=>{window.message.info(o("texts.action_success")),Ue.push({name:"service_list"})});function A(){return{name:"",value:""}}function oe(){return{name:"",mode:"ingress",protocol:"tcp",targetPort:0,publishedPort:0}}function ue(){return{type:"bind",source:"",target:"",readonly:!1,consistency:void 0}}function de(){return{name:"",value:"",op:"=="}}function H(){return{key:void 0,path:"",uid:"0",gid:"0",mode:444}}async function se(){var t,s,n;const b=S.params.name;b&&Q.find(b,!0).then(c=>{var J;d.value=(J=c.data)==null?void 0:J.service});let u=await Promise.all([Ne.search(),xe.search({pageIndex:1,pageSize:1e3}),Pe.search({pageIndex:1,pageSize:1e3})]);M.value=(t=u[0].data)==null?void 0:t.filter(c=>c.name!="ingress"),V.value=(s=u[1].data)==null?void 0:s.items.map(c=>({label:c.name,value:`${c.id}:${c.name}`})),L.value=(n=u[2].data)==null?void 0:n.items.map(c=>({label:c.name,value:`${c.id}:${c.name}`}))}return he(se),(b,u)=>(w(),j(F,null,[l(ke,{subtitle:d.value.name},{action:a(()=>[l(e($),{secondary:"",size:"small",onClick:u[0]||(u[0]=t=>b.$router.push({name:"service_list"}))},{icon:a(()=>[l(e(W),null,{default:a(()=>[l(e(De))]),_:1})]),default:a(()=>[p(" "+f(e(o)("buttons.return")),1)]),_:1})]),_:1},8,["subtitle"]),l(e(q),{class:"page-body",vertical:"",size:12},{default:a(()=>[l(e(ye),{model:d.value,rules:Z,ref_key:"form",ref:X,"label-placement":"top"},{default:a(()=>[l(e(U),{cols:"1 640:2","x-gap":24},{default:a(()=>[l(e(r),{label:e(o)("fields.name"),path:"name"},{default:a(()=>[l(e(i),{placeholder:e(o)("fields.name"),value:d.value.name,"onUpdate:value":u[1]||(u[1]=t=>d.value.name=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("objects.image"),path:"image"},{default:a(()=>[l(e(i),{placeholder:e(o)("objects.image"),value:d.value.image,"onUpdate:value":u[2]||(u[2]=t=>d.value.image=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.mode"),path:"mode"},{default:a(()=>[l(e(k),{value:d.value.mode,"onUpdate:value":u[3]||(u[3]=t=>d.value.mode=t),disabled:Boolean(d.value.id)},{default:a(()=>[l(e(v),{key:"replicated",value:"replicated"},{default:a(()=>[Te]),_:1}),l(e(v),{key:"global",value:"global"},{default:a(()=>[$e]),_:1}),l(e(v),{key:"replicated-job",value:"replicated-job"},{default:a(()=>[Be]),_:1}),l(e(v),{key:"global-job",value:"global-job"},{default:a(()=>[Fe]),_:1})]),_:1},8,["value","disabled"])]),_:1},8,["label"]),["replicated","replicated-job"].includes(d.value.mode)?(w(),B(e(r),{key:0,label:e(o)("fields.replicas"),path:"replicas"},{default:a(()=>[l(e(h),{placeholder:e(o)("fields.replicas"),min:0,value:d.value.replicas,"onUpdate:value":u[4]||(u[4]=t=>d.value.replicas=t),style:{"max-width":"120px"}},null,8,["placeholder","value"])]),_:1},8,["label"])):R("",!0),l(e(r),{label:e(o)("objects.network",2),span:"2",path:"networks"},{default:a(()=>[l(e(Ie),{value:d.value.networks,"onUpdate:value":u[5]||(u[5]=t=>d.value.networks=t)},{default:a(()=>[l(e(q),{"item-style":"display: flex;"},{default:a(()=>[(w(!0),j(F,null,E(M.value,t=>(w(),B(e(K),{value:t.name,label:t.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.command"),path:"command"},{default:a(()=>[l(e(i),{placeholder:e(o)("tips.command"),value:d.value.command,"onUpdate:value":u[6]||(u[6]=t=>d.value.command=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.args"),path:"command"},{default:a(()=>[l(e(i),{placeholder:e(o)("tips.args"),value:d.value.args,"onUpdate:value":u[7]||(u[7]=t=>d.value.args=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.work_dir"),path:"w"},{default:a(()=>[l(e(i),{placeholder:e(o)("fields.work_dir"),value:d.value.dir,"onUpdate:value":u[8]||(u[8]=t=>d.value.dir=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.user"),path:"command"},{default:a(()=>[l(e(i),{placeholder:e(o)("fields.user"),value:d.value.user,"onUpdate:value":u[9]||(u[9]=t=>d.value.user=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(r),{span:"2",label:e(o)("fields.env"),path:"env"},{default:a(()=>[l(e(m),{value:d.value.env,"onUpdate:value":u[10]||(u[10]=t=>d.value.env=t),"on-create":A},{default:a(({index:t,value:s})=>[l(e(i),{placeholder:e(o)("fields.name"),value:s.name,"onUpdate:value":n=>s.name=n},null,8,["placeholder","value","onUpdate:value"]),Re,l(e(i),{placeholder:e(o)("fields.value"),value:s.value,"onUpdate:value":n=>s.value=n},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"]),l(e(r),{span:"2",label:e(o)("fields.service_labels"),path:"labels"},{default:a(()=>[l(e(m),{value:d.value.labels,"onUpdate:value":u[11]||(u[11]=t=>d.value.labels=t),"on-create":A},{default:a(({index:t,value:s})=>[l(e(i),{placeholder:e(o)("fields.name"),value:s.name,"onUpdate:value":n=>s.name=n},null,8,["placeholder","value","onUpdate:value"]),ze,l(e(i),{placeholder:e(o)("fields.value"),value:s.value,"onUpdate:value":n=>s.value=n},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),l(N,{title:e(o)("fields.endpoint")},{default:a(()=>[l(e(U),{cols:"1"},{default:a(()=>[l(e(r),{label:e(o)("fields.resolution_mode"),path:"endpoint.mode","label-placement":"left","show-feedback":!1},{default:a(()=>[l(e(k),{value:d.value.endpoint.mode,"onUpdate:value":u[12]||(u[12]=t=>d.value.endpoint.mode=t)},{default:a(()=>[l(e(v),{key:"vip",value:"vip"},{default:a(()=>[Me]),_:1}),l(e(v),{key:"dnsrr",value:"dnsrr"},{default:a(()=>[Ve]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.ports"),"show-label":!1,path:"endpoint.ports","label-width":"70"},{default:a(()=>[l(e(m),{value:d.value.endpoint.ports,"onUpdate:value":u[13]||(u[13]=t=>d.value.endpoint.ports=t),"on-create":oe},{default:a(({index:t,value:s})=>[l(e(I),null,{default:a(()=>[l(e(i),{placeholder:e(o)("fields.name"),value:s.name,"onUpdate:value":n=>s.name=n,style:{width:"20%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(x),{placeholder:e(o)("fields.mode"),value:s.mode,"onUpdate:value":n=>s.mode=n,options:[{label:"Ingress",value:"ingress"},{label:"Host",value:"host"}],style:{width:"20%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(x),{placeholder:e(o)("fields.protocol"),value:s.protocol,"onUpdate:value":n=>s.protocol=n,options:[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"SCTP",value:"sctp"}],style:{width:"20%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(h),{"show-button":!1,min:0,max:65535,value:s.targetPort,"onUpdate:value":n=>s.targetPort=n,style:{width:"20%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[p(f(e(o)("fields.target_port")),1)]),_:1})]),_:2},1032,["value","onUpdate:value"]),l(e(h),{"show-button":!1,min:0,max:65535,value:s.publishedPort,"onUpdate:value":n=>s.publishedPort=n,style:{width:"20%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[p(f(e(o)("fields.published_port")),1)]),_:1})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"]),l(we,{title:e(o)("fields.more"),collapsed:!D.value},{action:a(()=>[l(e($),{secondary:"",size:"small",onClick:u[14]||(u[14]=t=>D.value=!D.value)},{default:a(()=>[p(f(D.value?e(o)("buttons.collapse"):e(o)("buttons.expand")),1)]),_:1})]),default:a(()=>[l(e(Ae),{type:"line",style:{"margin-top":"-12px"}},{default:a(()=>[l(e(_),{name:"mounts",tab:e(o)("fields.mounts"),"display-directive":"show"},{default:a(()=>[l(e(y),{"show-label":!1,path:"mounts"},{default:a(()=>[l(e(m),{value:d.value.mounts,"onUpdate:value":u[15]||(u[15]=t=>d.value.mounts=t),"on-create":ue},{default:a(({index:t,value:s})=>[l(e(I),null,{default:a(()=>[l(e(x),{placeholder:e(o)("fields.type"),value:s.type,"onUpdate:value":n=>s.type=n,options:ee,style:{width:"20%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(i),{placeholder:e(o)("fields.source_path"),value:s.source,"onUpdate:value":n=>s.source=n,style:{width:"30%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(i),{placeholder:e(o)("fields.target_path"),value:s.target,"onUpdate:value":n=>s.target=n,style:{width:"30%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(x),{placeholder:e(o)("fields.consistency"),value:s.consistency,"onUpdate:value":n=>s.consistency=n,options:le,style:{width:"20%","margin-right":"10px"}},null,8,["placeholder","value","onUpdate:value"])]),_:2},1024),l(e(K),{checked:s.readonly,"onUpdate:checked":n=>s.readonly=n},{default:a(()=>[p(f(e(o)("fields.readonly")),1)]),_:2},1032,["checked","onUpdate:checked"])]),_:1},8,["value"])]),_:1})]),_:1},8,["tab"]),l(e(_),{name:"files",tab:e(o)("fields.files"),"display-directive":"show"},{default:a(()=>[l(e(y),{label:e(o)("objects.config",2),path:"configs"},{default:a(()=>[l(e(m),{value:d.value.configs,"onUpdate:value":u[16]||(u[16]=t=>d.value.configs=t),"on-create":H},{default:a(({index:t,value:s})=>[l(e(I),null,{default:a(()=>[l(e(x),{filterable:"",placeholder:e(o)("fields.files"),value:s.key,"onUpdate:value":n=>s.key=n,style:{width:"20%"},options:V.value},null,8,["placeholder","value","onUpdate:value","options"]),l(e(i),{placeholder:e(o)("fields.target_path"),value:s.path,"onUpdate:value":n=>s.path=n,style:{width:"35%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(i),{placeholder:"UID",value:s.uid,"onUpdate:value":n=>s.uid=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[Le]),_:1})]),_:2},1032,["value","onUpdate:value"]),l(e(i),{placeholder:"GID",value:s.gid,"onUpdate:value":n=>s.gid=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[Xe]),_:1})]),_:2},1032,["value","onUpdate:value"]),l(e(h),{"show-button":!1,placeholder:e(o)("fields.mode"),value:s.mode,"onUpdate:value":n=>s.mode=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[Oe]),_:1})]),_:2},1032,["placeholder","value","onUpdate:value"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"]),l(e(y),{label:e(o)("objects.secret",2),path:"secrets"},{default:a(()=>[l(e(m),{value:d.value.secrets,"onUpdate:value":u[17]||(u[17]=t=>d.value.secrets=t),"on-create":H},{default:a(({index:t,value:s})=>[l(e(I),null,{default:a(()=>[l(e(x),{filterable:"",placeholder:e(o)("fields.files"),value:s.key,"onUpdate:value":n=>s.key=n,style:{width:"20%"},options:L.value},null,8,["placeholder","value","onUpdate:value","options"]),l(e(i),{placeholder:e(o)("fields.target_path"),value:s.path,"onUpdate:value":n=>s.path=n,style:{width:"35%"}},null,8,["placeholder","value","onUpdate:value"]),l(e(i),{placeholder:"UID",value:s.uid,"onUpdate:value":n=>s.uid=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[He]),_:1})]),_:2},1032,["value","onUpdate:value"]),l(e(i),{placeholder:"GID",value:s.gid,"onUpdate:value":n=>s.gid=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[Je]),_:1})]),_:2},1032,["value","onUpdate:value"]),l(e(h),{"show-button":!1,placeholder:e(o)("fields.mode"),value:s.mode,"onUpdate:value":n=>s.mode=n,style:{width:"15%"}},{suffix:a(()=>[l(e(g),{depth:"3"},{default:a(()=>[We]),_:1})]),_:2},1032,["placeholder","value","onUpdate:value"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["tab"]),l(e(_),{name:"resources",tab:e(o)("fields.resources"),"display-directive":"show"},{default:a(()=>[l(N,{title:e(o)("fields.limit")},{default:a(()=>[l(e(U),{cols:2,"x-gap":12},{default:a(()=>[l(e(r),{label:e(o)("fields.cpu"),path:"resource.limit.cpu"},{default:a(()=>[l(e(h),{step:.1,min:0,placeholder:"e.g. 0.5",value:d.value.resource.limit.cpu,"onUpdate:value":u[18]||(u[18]=t=>d.value.resource.limit.cpu=t),style:{width:"100%"}},null,8,["step","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.memory"),path:"esource.limit.memory"},{default:a(()=>[l(e(i),{placeholder:"e.g. 2G",value:d.value.resource.limit.memory,"onUpdate:value":u[19]||(u[19]=t=>d.value.resource.limit.memory=t)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"]),l(N,{title:e(o)("fields.reserve")},{default:a(()=>[l(e(U),{cols:2,"x-gap":12},{default:a(()=>[l(e(r),{label:e(o)("fields.cpu"),path:"resource.reserve.cpu"},{default:a(()=>[l(e(h),{step:.1,min:0,placeholder:"e.g. 0.1",value:d.value.resource.reserve.cpu,"onUpdate:value":u[20]||(u[20]=t=>d.value.resource.reserve.cpu=t),style:{width:"100%"}},null,8,["step","value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.memory"),path:"esource.reserve.memory"},{default:a(()=>[l(e(i),{placeholder:"e.g. 100M",value:d.value.resource.reserve.memory,"onUpdate:value":u[21]||(u[21]=t=>d.value.resource.reserve.memory=t)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"])]),_:1},8,["tab"]),l(e(_),{name:"placement",tab:e(o)("fields.placement"),"display-directive":"show"},{default:a(()=>[l(e(y),{label:e(o)("fields.constraints"),path:"placement.constraints"},{default:a(()=>[l(e(m),{value:d.value.placement.constraints,"onUpdate:value":u[22]||(u[22]=t=>d.value.placement.constraints=t),"on-create":de},{default:a(({index:t,value:s})=>[l(e(I),null,{default:a(()=>[l(e(i),{placeholder:e(o)("tips.constraint_name"),value:s.name,"onUpdate:value":n=>s.name=n},null,8,["placeholder","value","onUpdate:value"]),l(e(x),{value:s.op,"onUpdate:value":n=>s.op=n,options:[{label:"==",value:"=="},{label:"!=",value:"!="}],style:{width:"20%"}},null,8,["value","onUpdate:value"]),l(e(i),{placeholder:e(o)("tips.constraint_value"),value:s.value,"onUpdate:value":n=>s.value=n},null,8,["placeholder","value","onUpdate:value"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"]),l(e(y),{label:e(o)("fields.preferences"),path:"constraints.preferences"},{default:a(()=>[l(e(m),{value:d.value.placement.preferences,"onUpdate:value":u[23]||(u[23]=t=>d.value.placement.preferences=t),placeholder:"e.g. engine.labels.az"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["tab"]),l(e(_),{name:"schedule",tab:e(o)("fields.schedule"),"display-directive":"show"},{default:a(()=>[l(N,{title:e(o)("fields.update")},{default:a(()=>[l(e(U),{cols:"1 640:2 960:4","x-gap":12},{default:a(()=>[l(e(r),{label:e(o)("fields.parallelism"),path:"updatePolicy.parallelism"},{default:a(()=>[l(e(h),{min:0,placeholder:"Parallelism",value:d.value.updatePolicy.parallelism,"onUpdate:value":u[24]||(u[24]=t=>d.value.updatePolicy.parallelism=t),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.delay"),path:"updatePolicy.delay"},{default:a(()=>[l(e(i),{placeholder:"e.g. 30s",value:d.value.updatePolicy.delay,"onUpdate:value":u[25]||(u[25]=t=>d.value.updatePolicy.delay=t)},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.failure_action"),path:"updatePolicy.failureAction"},{default:a(()=>[l(e(k),{value:d.value.updatePolicy.failureAction,"onUpdate:value":u[26]||(u[26]=t=>d.value.updatePolicy.failureAction=t)},{default:a(()=>[l(e(v),{key:"pause",value:"pause"},{default:a(()=>[p(f(e(o)("enums.pause")),1)]),_:1}),l(e(v),{key:"continue",value:"continue"},{default:a(()=>[p(f(e(o)("enums.continue")),1)]),_:1}),l(e(v),{key:"rollback",value:"rollback"},{default:a(()=>[p(f(e(o)("enums.rollback")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.order"),path:"updatePolicy.order"},{default:a(()=>[l(e(k),{value:d.value.updatePolicy.order,"onUpdate:value":u[27]||(u[27]=t=>d.value.updatePolicy.order=t)},{default:a(()=>[l(e(v),{key:"start-first",value:"start-first"},{default:a(()=>[p(f(e(o)("enums.start_first")),1)]),_:1}),l(e(v),{key:"stop-first",value:"stop-first"},{default:a(()=>[p(f(e(o)("enums.stop_first")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"]),l(N,{title:e(o)("fields.rollback")},{default:a(()=>[l(e(U),{cols:"1 640:2 960:4","x-gap":12},{default:a(()=>[l(e(r),{label:e(o)("fields.parallelism"),path:"rollbackPolicy.parallelism"},{default:a(()=>[l(e(h),{min:0,placeholder:"Parallelism",value:d.value.rollbackPolicy.parallelism,"onUpdate:value":u[28]||(u[28]=t=>d.value.rollbackPolicy.parallelism=t),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.delay"),path:"rollbackPolicy.delay"},{default:a(()=>[l(e(i),{placeholder:"e.g. 30s",value:d.value.rollbackPolicy.delay,"onUpdate:value":u[29]||(u[29]=t=>d.value.rollbackPolicy.delay=t)},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.failure_action"),path:"rollbackPolicy.failureAction"},{default:a(()=>[l(e(k),{value:d.value.rollbackPolicy.failureAction,"onUpdate:value":u[30]||(u[30]=t=>d.value.rollbackPolicy.failureAction=t)},{default:a(()=>[l(e(v),{key:"pause",value:"pause"},{default:a(()=>[p(f(e(o)("enums.pause")),1)]),_:1}),l(e(v),{key:"continue",value:"continue"},{default:a(()=>[p(f(e(o)("enums.continue")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.order"),path:"rollbackPolicy.order"},{default:a(()=>[l(e(k),{value:d.value.rollbackPolicy.order,"onUpdate:value":u[31]||(u[31]=t=>d.value.rollbackPolicy.order=t)},{default:a(()=>[l(e(v),{key:"start-first",value:"start-first"},{default:a(()=>[p(f(e(o)("enums.start_first")),1)]),_:1}),l(e(v),{key:"stop-first",value:"stop-first"},{default:a(()=>[p(f(e(o)("enums.stop_first")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"]),l(N,{title:e(o)("fields.restart")},{default:a(()=>[l(e(U),{cols:"1 640:2 960:4","x-gap":12},{default:a(()=>[l(e(r),{label:e(o)("fields.max_attempts"),path:"restartPolicy.maxAttempts"},{default:a(()=>[l(e(h),{min:0,placeholder:"Max attempts",value:d.value.restartPolicy.maxAttempts,"onUpdate:value":u[32]||(u[32]=t=>d.value.restartPolicy.maxAttempts=t),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.delay"),path:"restartPolicy.delay"},{default:a(()=>[l(e(i),{placeholder:"e.g. 30s",value:d.value.restartPolicy.delay,"onUpdate:value":u[33]||(u[33]=t=>d.value.restartPolicy.delay=t)},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.window"),path:"restartPolicy.window"},{default:a(()=>[l(e(i),{placeholder:"e.g. 1m",value:d.value.restartPolicy.window,"onUpdate:value":u[34]||(u[34]=t=>d.value.restartPolicy.window=t)},null,8,["value"])]),_:1},8,["label"]),l(e(r),{label:e(o)("fields.condition"),path:"restartPolicy.failure"},{default:a(()=>[l(e(k),{value:d.value.restartPolicy.condition,"onUpdate:value":u[35]||(u[35]=t=>d.value.restartPolicy.condition=t)},{default:a(()=>[l(e(v),{key:"any",value:"any"},{default:a(()=>[qe]),_:1}),l(e(v),{key:"on-failure",value:"on-failure"},{default:a(()=>[Ee]),_:1}),l(e(v),{key:"none",value:"none"},{default:a(()=>[Qe]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"])]),_:1},8,["tab"]),l(e(_),{name:"log",tab:e(o)("fields.log_driver"),"display-directive":"show"},{default:a(()=>[l(e(y),{label:e(o)("fields.name"),path:"logDriver.name"},{default:a(()=>[l(e(k),{value:d.value.logDriver.name,"onUpdate:value":u[36]||(u[36]=t=>d.value.logDriver.name=t)},{default:a(()=>[(w(),j(F,null,E(ae,t=>l(e(v),{key:t.value,value:t.value},{default:a(()=>[p(f(t.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"]),l(e(y),{label:e(o)("fields.options"),path:"logDriver.options"},{default:a(()=>[l(e(m),{value:d.value.logDriver.options,"onUpdate:value":u[37]||(u[37]=t=>d.value.logDriver.options=t),"on-create":A},{default:a(({index:t,value:s})=>[l(e(i),{placeholder:e(o)("fields.name"),value:s.name,"onUpdate:value":n=>s.name=n},null,8,["placeholder","value","onUpdate:value"]),Ke,l(e(i),{placeholder:e(o)("fields.value"),value:s.value,"onUpdate:value":n=>s.value=n},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["tab"]),l(e(_),{name:"clabels",tab:e(o)("fields.container_labels"),"display-directive":"show"},{default:a(()=>[l(e(y),{"show-label":!1,path:"containerLabels"},{default:a(()=>[l(e(m),{value:d.value.containerLabels,"onUpdate:value":u[38]||(u[38]=t=>d.value.containerLabels=t),"on-create":A},{default:a(({index:t,value:s})=>[l(e(i),{placeholder:e(o)("fields.name"),value:s.name,"onUpdate:value":n=>s.name=n},null,8,["placeholder","value","onUpdate:value"]),Ye,l(e(i),{placeholder:e(o)("fields.value"),value:s.value,"onUpdate:value":n=>s.value=n},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1})]),_:1},8,["tab"]),l(e(_),{name:"dns",tab:"DNS","display-directive":"show"},{default:a(()=>[l(e(U),{cols:"1"},{default:a(()=>[l(e(r),{label:e(o)("fields.hosts"),path:"hosts"},{default:a(()=>[l(e(m),{value:d.value.hosts,"onUpdate:value":u[39]||(u[39]=t=>d.value.hosts=t),placeholder:"IP_address canonical_hostname [aliases...]"},null,8,["value"])]),_:1},8,["label"]),l(e(r),{"label-placement":"top",label:e(o)("fields.dns_servers"),path:"dns.servers"},{default:a(()=>[l(e(m),{value:d.value.dns.servers,"onUpdate:value":u[40]||(u[40]=t=>d.value.dns.servers=t),placeholder:"e.g. 10.10.10.200"},null,8,["value"])]),_:1},8,["label"]),l(e(r),{"label-placement":"top",label:e(o)("fields.dns_search"),path:"dns.search"},{default:a(()=>[l(e(m),{value:d.value.dns.search,"onUpdate:value":u[41]||(u[41]=t=>d.value.dns.search=t),placeholder:"e.g. abc.com"},null,8,["value"])]),_:1},8,["label"]),l(e(r),{"label-placement":"top",label:e(o)("fields.options"),path:"dns.options"},{default:a(()=>[l(e(m),{value:d.value.dns.options,"onUpdate:value":u[42]||(u[42]=t=>d.value.dns.options=t)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),l(e(_),{name:"others",tab:e(o)("fields.others"),"display-directive":"show"},{default:a(()=>[l(e(y),{label:e(o)("fields.hostname"),path:"hostname"},{default:a(()=>[l(e(i),{placeholder:e(o)("fields.hostname"),value:d.value.hostname,"onUpdate:value":u[43]||(u[43]=t=>d.value.hostname=t)},null,8,["placeholder","value"])]),_:1},8,["label"])]),_:1},8,["tab"])]),_:1})]),_:1},8,["title","collapsed"]),l(e($),{disabled:e(O),loading:e(O),onClick:_e(e(te),["prevent"]),type:"primary",style:ge({marginTop:D.value?"0":"12px"})},{icon:a(()=>[l(e(W),null,{default:a(()=>[l(e(je))]),_:1})]),default:a(()=>[p(" "+f(e(o)("buttons.save")),1)]),_:1},8,["disabled","loading","onClick","style"])]),_:1},8,["model"]),e(z)?(w(),B(e(Ce),{key:0,type:"warning"},{default:a(()=>[p(f(e(o)("texts.service_notice",{stack:e(z)})),1)]),_:1})):R("",!0)]),_:1})],64))}});export{xl as default};
