import{d as C,k as T,bW as $,u as A,l as w,m as D,o as d,c as f,b as t,w as a,e,C as P,N as V,i as u,t as r,h as n,f as z,a as m,g as p,j as S,Q as b,T as g}from"./index.85d3582f.js";import{X as E}from"./PageHeader.556c52c2.js";import{_ as v}from"./Anchor.d96a0ee7.js";import{X as F}from"./Code.85cde3b3.js";import{X as I}from"./Panel.5fe42ab1.js";import{_ as H}from"./Logs.d491a566.js";import{X as L,_ as i}from"./DescriptionItem.136d9c3a.js";import{t as M}from"./task.4e1c63e8.js";import{B as Q}from"./ArrowBackCircleOutline.f4323d84.js";import{N as k,a as R}from"./Tabs.cb7015dd.js";import{N as x}from"./Tag.04c651c7.js";import{N as X}from"./Table.e4fc5dbd.js";import{N as W}from"./Alert.c18a4d49.js";import"./index.9d2bf9c2.js";import"./CopyOutline.e34332fe.js";import"./hr.a93a0821.js";import"./container.c3b8b557.js";import"./service.387f6f1f.js";import"./InputNumber.d1b1db42.js";import"./Remove.e20fb71e.js";import"./Add.32836a6c.js";import"./Switch.f4840aa3.js";import"./Grid.4637279d.js";const q={class:"page-body"},ve=C({setup(G){const{t:s}=T(),N=$(),j=A(),l=w({}),h=w("");async function B(){var o,_;const y=N.params.id;let c=await M.find(y);l.value=(o=c.data)==null?void 0:o.task,h.value=(_=c.data)==null?void 0:_.raw}return D(B),(y,c)=>(d(),f(b,null,[t(E,{subtitle:l.value.name||l.value.id},{action:a(()=>[t(e(P),{secondary:"",size:"small",onClick:c[0]||(c[0]=o=>y.$router.push({name:"task_list"}))},{icon:a(()=>[t(e(V),null,{default:a(()=>[t(e(Q))]),_:1})]),default:a(()=>[u(" "+r(e(s)("buttons.return")),1)]),_:1})]),_:1},8,["subtitle"]),n("div",q,[t(e(R),{type:"line",style:{"margin-top":"-12px"}},{default:a(()=>[t(e(k),{name:"detail",tab:e(s)("fields.detail"),"display-directive":"show:lazy"},{default:a(()=>[t(e(z),{vertical:"",size:16},{default:a(()=>[t(e(L),{"label-placement":"left","label-align":"right","label-width":90},{default:a(()=>[t(e(i),{label:e(s)("fields.id")},{default:a(()=>[u(r(l.value.id),1)]),_:1},8,["label"]),t(e(i),{label:e(s)("objects.image")},{default:a(()=>[u(r(l.value.image),1)]),_:1},8,["label"]),l.value.serviceName?(d(),m(e(i),{key:0,label:e(s)("objects.service"),span:2},{default:a(()=>[t(v,{url:{name:"service_detail",params:{name:l.value.serviceName}}},{default:a(()=>[u(r(l.value.serviceName),1)]),_:1},8,["url"])]),_:1},8,["label"])):p("",!0),l.value.containerId?(d(),m(e(i),{key:1,label:e(s)("objects.container"),span:2},{default:a(()=>[t(v,{url:{name:"container_detail",params:{id:l.value.containerId,node:l.value.nodeId||"-"}}},{default:a(()=>[u(r(l.value.containerId),1)]),_:1},8,["url"])]),_:1},8,["label"])):p("",!0),l.value.nodeId?(d(),m(e(i),{key:2,label:e(s)("objects.node"),span:2},{default:a(()=>[t(v,{url:{name:"node_detail",params:{id:l.value.nodeId}}},{default:a(()=>[u(r(l.value.nodeName),1)]),_:1},8,["url"])]),_:1},8,["label"])):p("",!0),t(e(i),{label:e(s)("fields.created_at")},{default:a(()=>[u(r(l.value.createdAt),1)]),_:1},8,["label"]),t(e(i),{label:e(s)("fields.updated_at")},{default:a(()=>[u(r(l.value.updatedAt),1)]),_:1},8,["label"]),t(e(i),{label:"PID"},{default:a(()=>[u(r(l.value.pid),1)]),_:1}),t(e(i),{label:e(s)("fields.exit_code")},{default:a(()=>[u(r(l.value.exitCode),1)]),_:1},8,["label"]),t(e(i),{label:e(s)("fields.state")},{default:a(()=>[t(e(x),{round:"",size:"small",type:l.value.state==="running"?"success":"default"},{default:a(()=>[u(r(l.value.state),1)]),_:1},8,["type"])]),_:1},8,["label"]),t(e(i),{label:e(s)("fields.message")},{default:a(()=>[u(r(l.value.message),1)]),_:1},8,["label"]),l.value.error?(d(),m(e(i),{key:3,label:e(s)("fields.error"),span:2},{default:a(()=>[t(e(S),{type:"error"},{default:a(()=>[u(r(l.value.error),1)]),_:1})]),_:1},8,["label"])):p("",!0)]),_:1}),l.value.labels&&l.value.labels.length?(d(),m(I,{key:0,title:e(s)("fields.labels")},{default:a(()=>[t(e(X),{size:"small",bordered:!0,"single-line":!1},{default:a(()=>[n("thead",null,[n("tr",null,[n("th",null,r(e(s)("fields.name")),1),n("th",null,r(e(s)("fields.value")),1)])]),n("tbody",null,[(d(!0),f(b,null,g(l.value.labels,o=>(d(),f("tr",null,[n("td",null,r(o.name),1),n("td",null,r(o.value),1)]))),256))])]),_:1})]),_:1},8,["title"])):p("",!0),l.value.networks&&l.value.networks.length?(d(),m(I,{key:1,title:e(s)("objects.network",2)},{default:a(()=>[t(e(X),{size:"small",bordered:!0,"single-line":!1},{default:a(()=>[n("thead",null,[n("tr",null,[n("th",null,r(e(s)("fields.name")),1),n("th",null,r(e(s)("fields.address")),1)])]),n("tbody",null,[(d(!0),f(b,null,g(l.value.networks,o=>(d(),f("tr",null,[n("td",null,[t(v,{url:{name:"network_detail",params:{name:o.name}}},{default:a(()=>[u(r(o.name),1)]),_:2},1032,["url"])]),n("td",null,[t(e(z),{size:4},{default:a(()=>[(d(!0),f(b,null,g(o.ips,_=>(d(),m(e(x),{round:"",size:"small"},{default:a(()=>[u(r(_),1)]),_:2},1024))),256))]),_:2},1024)])]))),256))])]),_:1})]),_:1},8,["title"])):p("",!0)]),_:1})]),_:1},8,["tab"]),t(e(k),{name:"raw",tab:e(s)("fields.raw"),"display-directive":"show:lazy"},{default:a(()=>[t(F,{code:h.value,language:"json"},null,8,["code"])]),_:1},8,["tab"]),t(e(k),{name:"logs",tab:e(s)("fields.logs"),"display-directive":"show:lazy"},{default:a(()=>[e(j).getters.allow("task.logs")?(d(),m(H,{key:0,type:"task",id:e(N).params.id},null,8,["id"])):(d(),m(e(W),{key:1,type:"info"},{default:a(()=>[u(r(e(s)("texts.403")),1)]),_:1}))]),_:1},8,["tab"])]),_:1})])],64))}});export{ve as default};
