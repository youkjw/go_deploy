import{d as A,k as T,bW as z,l as _,bk as v,bl as L,bo as M,bm as P,m as W,o as n,c as C,b as a,w as l,e,C as k,N as h,i,t as c,bp as X,aW as d,a as p,g as b,f as x,Q as U,T as $,bq as j,aY as E,c2 as H,h as Q,c3 as Y,bt as I}from"./index.85d3582f.js";import{X as J}from"./PageHeader.556c52c2.js";import{r as K}from"./role.e89e830c.js";import{a as O}from"./index.9d2bf9c2.js";import{B as Z}from"./ArrowBackCircleOutline.f4323d84.js";import{C as ee}from"./CopyOutline.e34332fe.js";import{S as ae}from"./SaveOutline.608b2aa9.js";import{a as le,N as te}from"./Grid.4637279d.js";import{N as r}from"./FormItemGridItem.2cbaea10.js";import{N as oe}from"./Switch.f4840aa3.js";import{N as se}from"./RadioGroup.5ac456f1.js";import{N as B}from"./Radio.10d2e386.js";import{N as ue,a as re}from"./Checkbox.1898d3a6.js";import{N as ne}from"./DynamicInput.74e0089b.js";import{N as de}from"./InputGroup.0f983dd9.js";import"./Add.32836a6c.js";import"./Remove.e20fb71e.js";import"./ArrowDown.224587e2.js";const ie=i("Internal"),pe=i("LDAP"),me=Q("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),De=A({setup(fe){const{t:u}=T(),G=z(),s=_({type:"internal",admin:!1}),y=_([]),R={name:v(),loginName:v(),email:[v(),L()],password:v(),passwordConfirm:v(),tokens:M((m,o)=>o==null?void 0:o.every(t=>t.name&&t.value),u("tips.required_rule"))},g=_(),{submit:S,submiting:w}=P(g,()=>I.save(s.value),()=>{window.message.info(u("texts.action_success")),Y.push({name:"user_list"})}),{copy:D,copied:F,isSupported:V}=O();async function q(){const m=G.params.id||"";if(m){let t=await I.find(m);s.value=t.data}let o=await K.search();y.value=o.data}return W(q),(m,o)=>(n(),C(U,null,[a(J,{subtitle:s.value.id},{action:l(()=>[a(e(k),{secondary:"",size:"small",onClick:o[0]||(o[0]=t=>m.$router.push({name:"user_list"}))},{icon:l(()=>[a(e(h),null,{default:l(()=>[a(e(Z))]),_:1})]),default:l(()=>[i(" "+c(e(u)("buttons.return")),1)]),_:1})]),_:1},8,["subtitle"]),a(e(x),{class:"page-body",vertical:"",size:12},{default:l(()=>[a(e(X),{model:s.value,rules:R,ref_key:"form",ref:g,"label-placement":"top"},{default:l(()=>[a(e(le),{cols:"1 640:2","x-gap":24},{default:l(()=>[a(e(r),{label:e(u)("fields.username"),path:"name"},{default:l(()=>[a(e(d),{placeholder:e(u)("fields.username"),value:s.value.name,"onUpdate:value":o[1]||(o[1]=t=>s.value.name=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),a(e(r),{label:e(u)("fields.login_name"),path:"loginName"},{default:l(()=>[a(e(d),{placeholder:e(u)("fields.login_name"),value:s.value.loginName,"onUpdate:value":o[2]||(o[2]=t=>s.value.loginName=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),s.value.id?b("",!0):(n(),p(e(r),{key:0,label:e(u)("fields.password"),path:"password"},{default:l(()=>[a(e(d),{type:"password",placeholder:e(u)("fields.password"),value:s.value.password,"onUpdate:value":o[3]||(o[3]=t=>s.value.password=t)},null,8,["placeholder","value"])]),_:1},8,["label"])),s.value.id?b("",!0):(n(),p(e(r),{key:1,label:e(u)("fields.password_confirm"),path:"passwordConfirm"},{default:l(()=>[a(e(d),{type:"password",placeholder:e(u)("fields.password_confirm"),value:s.value.passwordConfirm,"onUpdate:value":o[4]||(o[4]=t=>s.value.passwordConfirm=t)},null,8,["placeholder","value"])]),_:1},8,["label"])),a(e(r),{label:e(u)("fields.email"),path:"email"},{default:l(()=>[a(e(d),{placeholder:e(u)("fields.email"),value:s.value.email,"onUpdate:value":o[5]||(o[5]=t=>s.value.email=t)},null,8,["placeholder","value"])]),_:1},8,["label"]),a(e(r),{label:e(u)("fields.admin"),path:"admin"},{default:l(()=>[a(e(oe),{value:s.value.admin,"onUpdate:value":o[6]||(o[6]=t=>s.value.admin=t)},{checked:l(()=>[i(c(e(u)("enums.yes")),1)]),unchecked:l(()=>[i(c(e(u)("enums.no")),1)]),_:1},8,["value"])]),_:1},8,["label"]),s.value.id?(n(),p(e(r),{key:2,label:e(u)("fields.type"),path:"type","label-placement":"left","label-width":"41"},{default:l(()=>[a(e(se),{value:s.value.type,"onUpdate:value":o[7]||(o[7]=t=>s.value.type=t)},{default:l(()=>[a(e(B),{key:"internal",value:"internal"},{default:l(()=>[ie]),_:1}),a(e(B),{key:"ldap",value:"ldap"},{default:l(()=>[pe]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])):b("",!0),y.value&&y.value.length?(n(),p(e(r),{key:3,label:e(u)("objects.role",2),span:"2",path:"roles"},{default:l(()=>[a(e(ue),{value:s.value.roles,"onUpdate:value":o[8]||(o[8]=t=>s.value.roles=t)},{default:l(()=>[a(e(x),{"item-style":"display: flex;"},{default:l(()=>[(n(!0),C(U,null,$(y.value,t=>(n(),p(e(re),{value:t.id,label:t.name},null,8,["value","label"]))),256))]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])):b("",!0),a(e(r),{label:e(u)("fields.tokens",2),span:"2",path:"tokens"},{default:l(()=>[a(e(ne),{value:s.value.tokens,"onUpdate:value":o[9]||(o[9]=t=>s.value.tokens=t),"on-create":()=>({name:"",value:e(j)()})},{default:l(({index:t,value:f})=>[a(e(d),{placeholder:e(u)("fields.name"),value:f.name,"onUpdate:value":N=>f.name=N,style:{width:"300px"}},null,8,["placeholder","value","onUpdate:value"]),me,a(e(de),null,{default:l(()=>[a(e(d),{placeholder:e(u)("fields.value"),value:f.value,"onUpdate:value":N=>f.value=N,readonly:""},null,8,["placeholder","value","onUpdate:value"]),a(e(E),{trigger:"hover"},{trigger:l(()=>[e(V)?(n(),p(e(k),{key:0,type:"default",onClick:()=>e(D)(f.value)},{icon:l(()=>[a(e(h),null,{default:l(()=>[a(e(ee))]),_:1})]),_:2},1032,["onClick"])):b("",!0)]),default:l(()=>[i(" "+c(e(u)(e(F)?"tips.copied":"buttons.copy")),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["value","on-create"])]),_:1},8,["label"]),a(e(te),{span:2},{default:l(()=>[a(e(k),{disabled:e(w),loading:e(w),onClick:H(e(S),["prevent"]),type:"primary"},{icon:l(()=>[a(e(h),null,{default:l(()=>[a(e(ae))]),_:1})]),default:l(()=>[i(" "+c(e(u)("buttons.save")),1)]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],64))}});export{De as default};
