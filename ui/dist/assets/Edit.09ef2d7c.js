import{d as F,k as P,bW as T,l as N,bk as V,bo as H,bm as L,m as A,o as h,c as _,b as l,w as a,e,C as k,N as w,i as o,t as r,bp as W,aW as b,Q as U,T as X,a as $,g as E,c2 as K,f as Q,h as j,c3 as J}from"./index.85d3582f.js";import{X as O}from"./PageHeader.556c52c2.js";import{c as x}from"./chart.4edba4f5.js";import{B as Y}from"./ArrowBackCircleOutline.f4323d84.js";import{S as Z}from"./SaveOutline.608b2aa9.js";import{a as ee,N as le}from"./Grid.4637279d.js";import{N as n}from"./FormItemGridItem.2cbaea10.js";import{N as B}from"./Select.60c05ccc.js";import{N as p}from"./InputNumber.d1b1db42.js";import{N as I}from"./RadioGroup.5ac456f1.js";import{N as v}from"./Radio.10d2e386.js";import{N as ae}from"./InputGroup.0f983dd9.js";import{N as f}from"./InputGroupLabel.138e9ae8.js";import{N as te}from"./DynamicInput.74e0089b.js";import"./Tag.04c651c7.js";import"./Remove.e20fb71e.js";import"./Add.32836a6c.js";import"./ArrowDown.224587e2.js";const ue=o("Line"),ie=o("Bar"),se=o("Pie"),oe=o("Gauge"),ne=j("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),ze=F({setup(re){const{t:s}=P(),z=T(),u=N({type:"line",dashboard:"home",width:12,height:200,unit:"",margin:{}}),S=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12}],G=[{label:"None",value:""},{type:"group",key:"Percent",label:"Percent",children:[{label:"0-100",value:"percent:100"},{label:"0.0-1.0",value:"percent:1"}]},{type:"group",key:"Time",label:"Time",children:[{label:"Nanoseconds",value:"time:ns"},{label:"Microseconds",value:"time:\xB5s"},{label:"Milliseconds",value:"time:ms"},{label:"Seconds",value:"time:s"},{label:"Minutes",value:"time:m"},{label:"Hours",value:"time:h"},{label:"Days",value:"time:d"}]},{type:"group",key:"Size",label:"Size",children:[{label:"Bits",value:"size:bits"},{label:"Bytes",value:"size:bytes"},{label:"Kilobytes",value:"size:kilobytes"},{label:"Megabytes",value:"size:megabytes"},{label:"Gigabytes",value:"size:gigabytes"}]}],C=[{label:"Any",value:"",key:"any"},{label:"Home",value:"home",key:"home"},{label:"Service",value:"service",key:"service"}],M={title:V(),metrics:H((d,t)=>!!t&&t.length>0,s("tips.required_rule"))},c=N(),{submit:q,submiting:y}=L(c,()=>x.save(u.value),()=>{window.message.info(s("texts.action_success")),J.push({name:"chart_list"})});function R(){return{legend:"",query:""}}async function D(){const d=z.params.id;if(d){let t=await x.find(d);u.value=t.data}}return A(D),(d,t)=>(h(),_(U,null,[l(O,null,{action:a(()=>[l(e(k),{secondary:"",size:"small",onClick:t[0]||(t[0]=i=>d.$router.push({name:"chart_list"}))},{icon:a(()=>[l(e(w),null,{default:a(()=>[l(e(Y))]),_:1})]),default:a(()=>[o(" "+r(e(s)("buttons.return")),1)]),_:1})]),_:1}),l(e(Q),{class:"page-body",vertical:"",size:12},{default:a(()=>[l(e(W),{model:u.value,rules:M,ref_key:"form",ref:c,"label-placement":"top","label-width":"90"},{default:a(()=>[l(e(ee),{cols:"1 640:3","x-gap":24},{default:a(()=>[l(e(n),{label:e(s)("fields.title"),path:"title"},{default:a(()=>[l(e(b),{placeholder:e(s)("fields.title"),value:u.value.title,"onUpdate:value":t[1]||(t[1]=i=>u.value.title=i)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.desc"),path:"desc",span:"2"},{default:a(()=>[l(e(b),{placeholder:e(s)("fields.title"),value:u.value.desc,"onUpdate:value":t[2]||(t[2]=i=>u.value.desc=i)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.width"),path:"width"},{default:a(()=>[l(e(B),{value:u.value.width,"onUpdate:value":t[3]||(t[3]=i=>u.value.width=i),options:S},null,8,["value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.height"),path:"height"},{default:a(()=>[l(e(p),{placeholder:e(s)("fields.height"),value:u.value.height,"onUpdate:value":t[4]||(t[4]=i=>u.value.height=i),style:{width:"100%"}},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.unit"),path:"unit"},{default:a(()=>[l(e(B),{value:u.value.unit,"onUpdate:value":t[5]||(t[5]=i=>u.value.unit=i),options:G},null,8,["value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.dashboard"),path:"dashboard",span:"3","label-placement":"left","label-align":"left"},{default:a(()=>[l(e(I),{value:u.value.dashboard,"onUpdate:value":t[6]||(t[6]=i=>u.value.dashboard=i)},{default:a(()=>[(h(),_(U,null,X(C,i=>l(e(v),{key:i.key,value:i.value},{default:a(()=>[o(r(i.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"]),l(e(n),{label:e(s)("fields.type"),path:"type",span:"3","label-placement":"left","label-align":"left"},{default:a(()=>[l(e(I),{value:u.value.type,"onUpdate:value":t[7]||(t[7]=i=>u.value.type=i)},{default:a(()=>[l(e(v),{key:"line",value:"line"},{default:a(()=>[ue]),_:1}),l(e(v),{key:"bar",value:"bar"},{default:a(()=>[ie]),_:1}),l(e(v),{key:"pie",value:"pie"},{default:a(()=>[se]),_:1}),l(e(v),{key:"gauge",value:"gauge"},{default:a(()=>[oe]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),u.value.type==="line"||u.value.type==="bar"?(h(),$(e(n),{key:0,label:e(s)("fields.margin"),path:"margin",span:"2","label-placement":"left","label-align":"left"},{default:a(()=>[l(e(ae),null,{default:a(()=>[l(e(f),null,{default:a(()=>[o(r(e(s)("fields.left")),1)]),_:1}),l(e(p),{min:0,placeholder:"",value:u.value.margin.left,"onUpdate:value":t[8]||(t[8]=i=>u.value.margin.left=i)},null,8,["value"]),l(e(f),null,{default:a(()=>[o(r(e(s)("fields.right")),1)]),_:1}),l(e(p),{min:0,placeholder:"",value:u.value.margin.right,"onUpdate:value":t[9]||(t[9]=i=>u.value.margin.right=i)},null,8,["value"]),l(e(f),null,{default:a(()=>[o(r(e(s)("fields.top")),1)]),_:1}),l(e(p),{min:0,placeholder:"",value:u.value.margin.top,"onUpdate:value":t[10]||(t[10]=i=>u.value.margin.top=i)},null,8,["value"]),l(e(f),null,{default:a(()=>[o(r(e(s)("fields.bottom")),1)]),_:1}),l(e(p),{min:0,placeholder:"",value:u.value.margin.bottom,"onUpdate:value":t[11]||(t[11]=i=>u.value.margin.bottom=i)},null,8,["value"])]),_:1})]),_:1},8,["label"])):E("",!0),l(e(n),{span:"3",label:e(s)("fields.metrics"),path:"metrics"},{default:a(()=>[l(e(te),{value:u.value.metrics,"onUpdate:value":t[12]||(t[12]=i=>u.value.metrics=i),"on-create":R},{default:a(({index:i,value:m})=>[l(e(b),{placeholder:e(s)("tips.legend"),value:m.legend,"onUpdate:value":g=>m.legend=g,style:{width:"250px"}},null,8,["placeholder","value","onUpdate:value"]),ne,l(e(b),{placeholder:e(s)("tips.query"),value:m.query,"onUpdate:value":g=>m.query=g},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"]),l(e(le),{span:2},{default:a(()=>[l(e(k),{onClick:K(e(q),["prevent"]),type:"primary",disabled:e(y),loading:e(y)},{icon:a(()=>[l(e(w),null,{default:a(()=>[l(e(Z))]),_:1})]),default:a(()=>[o(" "+r(e(s)("buttons.save")),1)]),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],64))}});export{ze as default};
