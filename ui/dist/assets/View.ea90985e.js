import{d as V,k as D,bW as I,l as g,m as P,o,c as p,b as a,w as l,e,C as w,N as F,i as r,t as s,h as i,f as B,a as v,g as y,Q as h,T as C}from"./index.85d3582f.js";import{X as S}from"./PageHeader.556c52c2.js";import{X as k}from"./Panel.5fe42ab1.js";import{_ as j}from"./Anchor.d96a0ee7.js";import{X as L}from"./Code.85cde3b3.js";import{X,_ as n}from"./DescriptionItem.136d9c3a.js";import{n as M}from"./node.67b41fa8.js";import{t as E}from"./task.4e1c63e8.js";import{B as G}from"./ArrowBackCircleOutline.f4323d84.js";import{N as T,a as H}from"./Tabs.cb7015dd.js";import{N as _}from"./Tag.04c651c7.js";import{N as $}from"./Table.e4fc5dbd.js";import"./hr.a93a0821.js";import"./index.9d2bf9c2.js";import"./CopyOutline.e34332fe.js";import"./Grid.4637279d.js";import"./Add.32836a6c.js";const Q={class:"page-body"},R=r("leader"),W=i("thead",null,[i("tr",null,[i("th",null,"\u540D\u79F0"),i("th",null,"\u503C")])],-1),fe=V({setup(q){const{t:u}=D(),x=I(),t=g({}),c=g([]),N=g("");async function A(){var b,d,z;const m=x.params.id;let f=await Promise.all([M.find(m),E.search({node:m,pageIndex:1,pageSize:100})]);t.value=(b=f[0].data)==null?void 0:b.node,N.value=(d=f[0].data)==null?void 0:d.raw,c.value=(z=f[1].data)==null?void 0:z.items}return P(A),(m,f)=>{var b;return o(),p(h,null,[a(S,{subtitle:(b=t.value.name)!=null?b:t.value.hostname},{action:l(()=>[a(e(w),{secondary:"",size:"small",onClick:f[0]||(f[0]=d=>m.$router.push({name:"node_list"}))},{icon:l(()=>[a(e(F),null,{default:l(()=>[a(e(G))]),_:1})]),default:l(()=>[r(" "+s(e(u)("buttons.return")),1)]),_:1}),a(e(w),{secondary:"",size:"small",onClick:f[1]||(f[1]=d=>m.$router.push({name:"node_edit",params:{id:t.value.id}}))},{default:l(()=>[r(s(e(u)("buttons.edit")),1)]),_:1})]),_:1},8,["subtitle"]),i("div",Q,[a(e(H),{type:"line",style:{"margin-top":"-12px"}},{default:l(()=>[a(e(T),{name:"detail",tab:e(u)("fields.detail")},{default:l(()=>[a(e(B),{vertical:"",size:16},{default:l(()=>[a(e(X),{"label-placement":"left","label-align":"right","label-width":105},{default:l(()=>[a(e(n),{label:e(u)("fields.id")},{default:l(()=>[r(s(t.value.id),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.hostname")},{default:l(()=>[r(s(t.value.hostname),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.created_at")},{default:l(()=>[r(s(t.value.createdAt),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.updated_at")},{default:l(()=>[r(s(t.value.updatedAt),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.arch")},{default:l(()=>[r(s(t.value.arch),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.os")},{default:l(()=>[r(s(t.value.os),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.cpu")},{default:l(()=>[r(s(t.value.cpu),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.memory")},{default:l(()=>{var d;return[r(s((d=t.value.memory)==null?void 0:d.toFixed(2))+" GB",1)]}),_:1},8,["label"]),a(e(n),{label:e(u)("fields.engine_version")},{default:l(()=>[r(s(t.value.engineVersion),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.address")},{default:l(()=>[r(s(t.value.address),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.state")},{default:l(()=>[a(e(_),{round:"",size:"small",type:t.value.state==="ready"?"success":"default"},{default:l(()=>[r(s(t.value.state),1)]),_:1},8,["type"])]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.availability")},{default:l(()=>[a(e(_),{round:"",size:"small",type:t.value.availability==="active"?"success":"default"},{default:l(()=>[r(s(t.value.availability),1)]),_:1},8,["type"])]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.role")},{default:l(()=>[a(e(B),{size:6},{default:l(()=>{var d;return[a(e(_),{round:"",size:"small",type:t.value.role==="manager"?"primary":"default"},{default:l(()=>[r(s(t.value.role),1)]),_:1},8,["type"]),(d=t.value.manager)!=null&&d.leader?(o(),v(e(_),{key:0,round:"",size:"small",type:"error"},{default:l(()=>[R]),_:1})):y("",!0)]}),_:1})]),_:1},8,["label"])]),_:1}),t.value.manager?(o(),v(k,{key:0,title:"Manager"},{default:l(()=>[a(e(X),{"label-placement":"left","label-align":"right"},{default:l(()=>[a(e(n),{label:e(u)("fields.reachability")},{default:l(()=>[r(s(t.value.manager.reachability),1)]),_:1},8,["label"]),a(e(n),{label:e(u)("fields.address")},{default:l(()=>[r(s(t.value.manager.addr),1)]),_:1},8,["label"])]),_:1})]),_:1})):y("",!0),t.value.labels&&t.value.labels.length?(o(),v(k,{key:1,title:"Labels"},{default:l(()=>[a(e($),{size:"small",bordered:!0,"single-line":!1},{default:l(()=>[W,i("tbody",null,[(o(!0),p(h,null,C(t.value.labels,d=>(o(),p("tr",null,[i("td",null,s(d.name),1),i("td",null,s(d.value),1)]))),256))])]),_:1})]),_:1})):y("",!0),c.value&&c.value.length?(o(),v(k,{key:2,title:"Tasks"},{default:l(()=>[a(e($),{size:"small",bordered:!0,"single-line":!1},{default:l(()=>[i("thead",null,[i("tr",null,[i("th",null,s(e(u)("fields.id")),1),i("th",null,s(e(u)("fields.state")),1),i("th",null,s(e(u)("objects.image")),1),i("th",null,s(e(u)("fields.updated_at")),1)])]),i("tbody",null,[(o(!0),p(h,null,C(c.value,d=>(o(),p("tr",null,[i("td",null,[a(j,{url:{name:"task_detail",params:{id:d.id}}},{default:l(()=>[r(s(d.id),1)]),_:2},1032,["url"])]),i("td",null,[a(e(_),{round:"",size:"small",type:d.state==="running"?"success":"error"},{default:l(()=>[r(s(d.state),1)]),_:2},1032,["type"])]),i("td",null,s(d.image),1),i("td",null,s(d.updatedAt),1)]))),256))])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1},8,["tab"]),a(e(T),{name:"raw",tab:e(u)("fields.raw")},{default:l(()=>[a(L,{code:N.value,language:"json"},null,8,["code"])]),_:1},8,["tab"])]),_:1})])],64)}}});export{fe as default};
