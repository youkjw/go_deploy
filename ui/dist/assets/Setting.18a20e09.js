import{H as y,_ as P,d as A,k as D,l as w,m as F,o as X,c as z,b as e,w as a,e as l,C as m,i as p,t as i,bp as N,O as n,aW as o,aR as x,aS as U,f as B,Q as R}from"./index.85d3582f.js";import{X as T}from"./PageHeader.556c52c2.js";import{X as S}from"./Panel.5fe42ab1.js";import{N as j}from"./Switch.f4840aa3.js";import{N as k}from"./RadioGroup.5ac456f1.js";import{N as f}from"./Radio.10d2e386.js";import{a as C}from"./Grid.4637279d.js";import{N as _}from"./FormItemGridItem.2cbaea10.js";import{N as b}from"./InputGroup.0f983dd9.js";import{N as g}from"./InputGroupLabel.138e9ae8.js";import{N as H}from"./Alert.c18a4d49.js";import"./hr.a93a0821.js";class M{load(){return y.get("/setting/load")}save(t,d){return console.log({id:t,options:d}),y.post("/setting/save",{id:t,options:d})}}var I=new M;const O=p("None"),V=p("TLS"),$=p("StartTLS"),E=A({setup(G){const{t}=D(),d=w({ldap:{security:0,auth:"simple"},metric:{},deploy:{}}),r=w("");function h(v){r.value===v?r.value="":r.value=v}async function c(v,u){await I.save(v,u),window.message.info(t("texts.action_success"))}async function L(){let v=(await I.load()).data;d.value=Object.assign(d.value,v)}return F(L),(v,u)=>(X(),z(R,null,[e(T),e(l(B),{class:"page-body",vertical:"",size:12},{default:a(()=>[e(S,{title:"LDAP",subtitle:l(t)("tips.ldap"),divider:"bottom",collapsed:r.value!=="ldap"},{action:a(()=>[e(l(m),{secondary:"",strong:"",class:"toggle",size:"small",onClick:u[0]||(u[0]=s=>h("ldap"))},{default:a(()=>[p(i(r.value==="ldap"?l(t)("buttons.collapse"):l(t)("buttons.expand")),1)]),_:1})]),default:a(()=>[e(l(N),{model:d.value,ref:"formLdap","label-placement":"left",style:{padding:"4px 0 0 12px"},"label-width":"auto"},{default:a(()=>[e(l(n),{label:l(t)("fields.enabled"),path:"ldap.enabled","label-align":"right"},{default:a(()=>[e(l(j),{value:d.value.ldap.enabled,"onUpdate:value":u[1]||(u[1]=s=>d.value.ldap.enabled=s)},null,8,["value"])]),_:1},8,["label"]),e(l(n),{label:l(t)("fields.address"),path:"ldap.address","label-align":"right"},{default:a(()=>[e(l(o),{placeholder:l(t)("tips.ldap_address"),value:d.value.ldap.address,"onUpdate:value":u[2]||(u[2]=s=>d.value.ldap.address=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),e(l(n),{label:l(t)("fields.security"),path:"ldap.security"},{default:a(()=>[e(l(k),{value:d.value.ldap.security,"onUpdate:value":u[3]||(u[3]=s=>d.value.ldap.security=s)},{default:a(()=>[e(l(f),{value:0},{default:a(()=>[O]),_:1}),e(l(f),{value:1},{default:a(()=>[V]),_:1}),e(l(f),{value:2},{default:a(()=>[$]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(l(n),{label:l(t)("fields.authentication"),path:"ldap.auth"},{default:a(()=>[e(l(k),{value:d.value.ldap.auth,"onUpdate:value":u[4]||(u[4]=s=>d.value.ldap.auth=s)},{default:a(()=>[e(l(f),{value:"simple"},{default:a(()=>[p(i(l(t)("enums.simple")),1)]),_:1}),e(l(f),{value:"bind"},{default:a(()=>[p(i(l(t)("enums.bind")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),x(e(l(n),{label:l(t)("fields.user_dn"),path:"ldap.user_dn","label-align":"right"},{default:a(()=>[e(l(o),{placeholder:l(t)("tips.ldap_user_dn"),value:d.value.ldap.user_dn,"onUpdate:value":u[5]||(u[5]=s=>d.value.ldap.user_dn=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),[[U,d.value.ldap.auth==="simple"]]),x(e(l(n),{label:l(t)("fields.bind_dn"),"label-align":"right","label-width":"auto","show-feedback":!1},{default:a(()=>[e(l(C),{cols:2,"x-gap":24},{default:a(()=>[e(l(_),{path:"ldap.bind_dn"},{default:a(()=>[e(l(b),null,{default:a(()=>[e(l(g),{style:{"min-width":"60px"}},{default:a(()=>[p(i(l(t)("fields.dn")),1)]),_:1}),e(l(o),{placeholder:l(t)("tips.ldap_bind_dn"),value:d.value.ldap.bind_dn,"onUpdate:value":u[6]||(u[6]=s=>d.value.ldap.bind_dn=s)},null,8,["placeholder","value"])]),_:1})]),_:1}),e(l(_),{path:"ldap.bind_pwd"},{default:a(()=>[e(l(b),null,{default:a(()=>[e(l(g),{style:{"min-width":"60px"}},{default:a(()=>[p(i(l(t)("fields.password")),1)]),_:1}),e(l(o),{type:"password",placeholder:l(t)("tips.ldap_bind_pwd"),value:d.value.ldap.bind_pwd,"onUpdate:value":u[7]||(u[7]=s=>d.value.ldap.bind_pwd=s)},null,8,["placeholder","value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),[[U,d.value.ldap.auth==="bind"]]),e(l(n),{label:l(t)("fields.base_dn"),path:"ldap.base_dn","label-align":"right"},{default:a(()=>[e(l(o),{placeholder:l(t)("tips.ldap_base_dn"),value:d.value.ldap.base_dn,"onUpdate:value":u[8]||(u[8]=s=>d.value.ldap.base_dn=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),e(l(n),{label:l(t)("fields.user_filter"),path:"ldap.user_filter","label-align":"right"},{default:a(()=>[e(l(o),{placeholder:l(t)("tips.ldap_user_filter"),value:d.value.ldap.user_filter,"onUpdate:value":u[9]||(u[9]=s=>d.value.ldap.user_filter=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),e(l(n),{label:l(t)("fields.attr_map"),"label-align":"right","show-feedback":!1},{default:a(()=>[e(l(C),{cols:2,"x-gap":24},{default:a(()=>[e(l(_),{path:"ldap.name_attr"},{default:a(()=>[e(l(b),null,{default:a(()=>[e(l(g),{style:{"min-width":"80px"}},{default:a(()=>[p(i(l(t)("fields.username")),1)]),_:1}),e(l(o),{placeholder:"e.g. displayName",value:d.value.ldap.name_attr,"onUpdate:value":u[10]||(u[10]=s=>d.value.ldap.name_attr=s)},null,8,["value"])]),_:1})]),_:1}),e(l(_),{path:"ldap.email_attr"},{default:a(()=>[e(l(b),null,{default:a(()=>[e(l(g),{style:{"min-width":"80px"}},{default:a(()=>[p(i(l(t)("fields.email")),1)]),_:1}),e(l(o),{placeholder:"e.g. mail",value:d.value.ldap.email_attr,"onUpdate:value":u[11]||(u[11]=s=>d.value.ldap.email_attr=s)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),e(l(m),{type:"primary",onClick:u[12]||(u[12]=()=>c("ldap",d.value.ldap))},{default:a(()=>[p(i(l(t)("buttons.save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["subtitle","collapsed"]),e(S,{title:l(t)("fields.monitor"),subtitle:l(t)("tips.monitor"),collapsed:r.value!=="metric"},{action:a(()=>[e(l(m),{secondary:"",strong:"",class:"toggle",size:"small",onClick:u[13]||(u[13]=s=>h("metric"))},{default:a(()=>[p(i(r.value==="metric"?l(t)("buttons.collapse"):l(t)("buttons.expand")),1)]),_:1})]),default:a(()=>[e(l(N),{model:d.value,ref:"formMetrics","label-placement":"left",style:{padding:"4px 0 0 12px"}},{default:a(()=>[e(l(n),{label:"Prometheus",path:"metric.prometheus","label-align":"right"},{default:a(()=>[e(l(o),{placeholder:l(t)("tips.prometheus"),value:d.value.metric.prometheus,"onUpdate:value":u[14]||(u[14]=s=>d.value.metric.prometheus=s)},null,8,["placeholder","value"])]),_:1}),e(l(m),{type:"primary",onClick:u[15]||(u[15]=()=>c("metric",d.value.metric))},{default:a(()=>[p(i(l(t)("buttons.save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["title","subtitle","collapsed"]),e(l(H),{type:"info"},{default:a(()=>[p(i(l(t)("texts.setting_notice")),1)]),_:1})]),_:1})],64))}});var ul=P(E,[["__scopeId","data-v-be0e009c"]]);export{ul as default};
