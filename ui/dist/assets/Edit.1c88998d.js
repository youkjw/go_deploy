import{d as B,k as C,bW as D,l as _,bm as F,m as G,o as S,c as M,b as a,w as l,e,C as N,N as h,i as u,t as y,bp as R,aW as v,c2 as V,f as W,Q as z,h as A,c3 as P}from"./index.85d3582f.js";import{X}from"./PageHeader.556c52c2.js";import{n as g}from"./node.67b41fa8.js";import{B as $}from"./ArrowBackCircleOutline.f4323d84.js";import{N as r}from"./Radio.10d2e386.js";import{S as E}from"./SaveOutline.608b2aa9.js";import{a as H,N as L}from"./Grid.4637279d.js";import{N as m}from"./FormItemGridItem.2cbaea10.js";import{N as k}from"./RadioGroup.5ac456f1.js";import{N as Q}from"./DynamicInput.74e0089b.js";import"./Add.32836a6c.js";import"./Remove.e20fb71e.js";import"./ArrowDown.224587e2.js";const T=u("Worker"),j=u("Manager"),q=u("Active"),J=u("Pause"),K=u("Drain"),O=A("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),pe=B({setup(Y){const{t:s}=C(),x=D(),t=_({}),c=_(),{submit:w,submiting:b}=F(c,()=>g.save(t.value),()=>{window.message.info(s("texts.action_success")),P.push({name:"node_list"})});function U(){return{name:"",value:""}}async function I(){var i;const p=x.params.id;let o=await g.find(p);t.value=(i=o.data)==null?void 0:i.node}return G(I),(p,o)=>{var i;return S(),M(z,null,[a(X,{subtitle:(i=t.value.name)!=null?i:t.value.hostname},{action:l(()=>[a(e(N),{secondary:"",size:"small",onClick:o[0]||(o[0]=n=>p.$router.push({name:"node_list"}))},{icon:l(()=>[a(e(h),null,{default:l(()=>[a(e($))]),_:1})]),default:l(()=>[u(" "+y(e(s)("buttons.return")),1)]),_:1})]),_:1},8,["subtitle"]),a(e(W),{class:"page-body",vertical:"",size:12},{default:l(()=>[a(e(R),{model:t.value,ref_key:"form",ref:c,"label-placement":"top"},{default:l(()=>[a(e(H),{cols:"1 640:2","x-gap":24},{default:l(()=>[a(e(m),{label:e(s)("fields.name"),span:"2",path:"name","label-placement":"left"},{default:l(()=>[a(e(v),{placeholder:e(s)("fields.name"),value:t.value.name,"onUpdate:value":o[1]||(o[1]=n=>t.value.name=n),style:{"max-width":"400px"}},null,8,["placeholder","value"])]),_:1},8,["label"]),a(e(m),{label:e(s)("fields.role"),path:"role","label-placement":"left"},{default:l(()=>[a(e(k),{value:t.value.role,"onUpdate:value":o[2]||(o[2]=n=>t.value.role=n)},{default:l(()=>[a(e(r),{key:"worker",value:"worker"},{default:l(()=>[T]),_:1}),a(e(r),{key:"manager",value:"manager"},{default:l(()=>[j]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),a(e(m),{label:e(s)("fields.availability"),path:"availability","label-placement":"left"},{default:l(()=>[a(e(k),{value:t.value.availability,"onUpdate:value":o[3]||(o[3]=n=>t.value.availability=n)},{default:l(()=>[a(e(r),{key:"active",value:"active"},{default:l(()=>[q]),_:1}),a(e(r),{key:"pause",value:"pause"},{default:l(()=>[J]),_:1}),a(e(r),{key:"drain",value:"drain"},{default:l(()=>[K]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),a(e(m),{span:"3",label:e(s)("fields.tags"),path:"labels"},{default:l(()=>[a(e(Q),{value:t.value.labels,"onUpdate:value":o[4]||(o[4]=n=>t.value.labels=n),"on-create":U},{default:l(({index:n,value:d})=>[a(e(v),{placeholder:e(s)("fields.name"),value:d.name,"onUpdate:value":f=>d.name=f},null,8,["placeholder","value","onUpdate:value"]),O,a(e(v),{placeholder:e(s)("fields.value"),value:d.value,"onUpdate:value":f=>d.value=f},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"]),a(e(L),{span:2},{default:l(()=>[a(e(N),{onClick:V(e(w),["prevent"]),type:"primary",disabled:e(b),loading:e(b)},{icon:l(()=>[a(e(h),null,{default:l(()=>[a(e(E))]),_:1})]),default:l(()=>[u(" "+y(e(s)("buttons.save")),1)]),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],64)}}});export{pe as default};
