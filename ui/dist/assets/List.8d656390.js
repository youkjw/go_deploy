import{d as v,k as C,J as g,m as w,o as f,c,b as t,w as a,e,C as m,N as z,i as u,t as l,f as _,aW as $,h as n,Q as y,T as A}from"./index.85d3582f.js";import{_ as B}from"./Anchor.d96a0ee7.js";import{X as I}from"./PageHeader.556c52c2.js";import{r as N}from"./role.e89e830c.js";import{A as P}from"./AddOutline.f0719097.js";import{N as T}from"./Table.e4fc5dbd.js";import{N as H}from"./Time.b1d0572f.js";import{N as M}from"./Popconfirm.ac7ac0d3.js";const L=v({setup(V){const{t:s}=C(),r=g({name:"",roles:[]});async function h(i,d){await N.delete(i.id,i.name),r.roles.splice(d,1)}async function p(){let i=await N.search(r.name);r.roles=i.data||[]}return w(p),(i,d)=>(f(),c(y,null,[t(I,null,{action:a(()=>[t(e(m),{secondary:"",size:"small",onClick:d[0]||(d[0]=o=>i.$router.push({name:"role_new"}))},{icon:a(()=>[t(e(z),null,{default:a(()=>[t(e(P))]),_:1})]),default:a(()=>[u(" "+l(e(s)("buttons.new")),1)]),_:1})]),_:1}),t(e(_),{class:"page-body",vertical:"",size:12},{default:a(()=>[t(e(_),{size:12},{default:a(()=>[t(e($),{size:"small",value:e(r).name,"onUpdate:value":d[1]||(d[1]=o=>e(r).name=o),placeholder:e(s)("fields.name"),clearable:""},null,8,["value","placeholder"]),t(e(m),{size:"small",type:"primary",onClick:p},{default:a(()=>[u(l(e(s)("buttons.search")),1)]),_:1})]),_:1}),t(e(T),{size:"small",bordered:!0,"single-line":!1},{default:a(()=>[n("thead",null,[n("tr",null,[n("th",null,l(e(s)("fields.id")),1),n("th",null,l(e(s)("fields.name")),1),n("th",null,l(e(s)("fields.desc")),1),n("th",null,l(e(s)("fields.updated_at")),1),n("th",null,l(e(s)("fields.actions")),1)])]),n("tbody",null,[(f(!0),c(y,null,A(e(r).roles,(o,b)=>(f(),c("tr",{key:o.id},[n("td",null,[t(B,{url:{name:"role_detail",params:{id:o.id}}},{default:a(()=>[u(l(o.id),1)]),_:2},1032,["url"])]),n("td",null,l(o.name),1),n("td",null,l(o.desc),1),n("td",null,[t(e(H),{time:o.updatedAt,format:"y-MM-dd HH:mm:ss"},null,8,["time"])]),n("td",null,[t(e(M),{"show-icon":!1,onPositiveClick:k=>h(o,b)},{trigger:a(()=>[t(e(m),{size:"tiny",quaternary:"",type:"error"},{default:a(()=>[u(l(e(s)("buttons.delete")),1)]),_:1})]),default:a(()=>[u(" "+l(e(s)("prompts.delete")),1)]),_:2},1032,["onPositiveClick"]),t(e(m),{size:"tiny",quaternary:"",type:"warning",onClick:k=>i.$router.push({name:"role_edit",params:{id:o.id}})},{default:a(()=>[u(l(e(s)("buttons.edit")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})],64))}});export{L as default};
