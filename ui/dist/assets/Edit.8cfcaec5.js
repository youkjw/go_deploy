import{d as X,k as z,bW as D,l as y,bk as k,bm as P,m as M,o as m,c as W,b as a,w as l,e,C as w,N as B,i as v,t as C,bp as $,aW as d,a as c,g as b,c2 as q,f as A,Q as E,h as _,c3 as H}from"./index.85d3582f.js";import{X as Q}from"./PageHeader.556c52c2.js";import{X as I}from"./Panel.5fe42ab1.js";import{s as R}from"./secret.af3de4cb.js";import{B as T}from"./ArrowBackCircleOutline.f4323d84.js";import{S as j}from"./SaveOutline.608b2aa9.js";import{a as g}from"./Grid.4637279d.js";import{N as r}from"./FormItemGridItem.2cbaea10.js";import{N as h}from"./DynamicInput.74e0089b.js";import{N as J}from"./RadioGroup.5ac456f1.js";import{N as F}from"./Radio.10d2e386.js";import"./hr.a93a0821.js";import"./Add.32836a6c.js";import"./Remove.e20fb71e.js";import"./ArrowDown.224587e2.js";const K=_("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),L=_("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),O=v("None"),Y=v("Golang"),Z=_("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1),be=X({setup(ee){const{t}=z(),x=D();x.params.name;const n=y({driver:{},templating:{name:"none"}}),G={name:k(),data:k()},N=y(),{submit:S,submiting:U}=P(N,()=>R.save(n.value),()=>{window.message.info(t("texts.action_success")),H.push({name:"secret_list"})});function f(){return{name:"",value:""}}async function V(){var o;const p=x.params.id;if(p){let s=await R.find(p);n.value=(o=s.data)==null?void 0:o.secret}}return M(V),(p,o)=>(m(),W(E,null,[a(Q,{subtitle:n.value.name},{action:l(()=>[a(e(w),{secondary:"",size:"small",onClick:o[0]||(o[0]=s=>p.$router.push({name:"secret_list"}))},{icon:l(()=>[a(e(B),null,{default:l(()=>[a(e(T))]),_:1})]),default:l(()=>[v(" "+C(e(t)("buttons.return")),1)]),_:1})]),_:1},8,["subtitle"]),a(e(A),{class:"page-body",vertical:"",size:12},{default:l(()=>[a(e($),{model:n.value,rules:G,ref_key:"form",ref:N,"label-placement":"top","label-width":"90"},{default:l(()=>[a(e(g),{cols:"1 640:2","x-gap":24},{default:l(()=>[a(e(r),{label:e(t)("fields.name"),path:"name"},{default:l(()=>[a(e(d),{placeholder:e(t)("fields.name"),value:n.value.name,"onUpdate:value":o[1]||(o[1]=s=>n.value.name=s),disabled:Boolean(n.value.id)},null,8,["placeholder","value","disabled"])]),_:1},8,["label"]),n.value.id?b("",!0):(m(),c(e(r),{key:0,label:e(t)("fields.content"),path:"data",span:"2"},{default:l(()=>[a(e(d),{type:"textarea",placeholder:e(t)("fields.content"),value:n.value.data,"onUpdate:value":o[2]||(o[2]=s=>n.value.data=s),autosize:{minRows:5,maxRows:30}},null,8,["placeholder","value"])]),_:1},8,["label"])),a(e(r),{span:"3",label:e(t)("fields.labels"),path:"labels"},{default:l(()=>[a(e(h),{value:n.value.labels,"onUpdate:value":o[3]||(o[3]=s=>n.value.labels=s),"on-create":f},{default:l(({index:s,value:u})=>[a(e(d),{placeholder:e(t)("fields.name"),value:u.name,"onUpdate:value":i=>u.name=i},null,8,["placeholder","value","onUpdate:value"]),K,a(e(d),{placeholder:e(t)("fields.value"),value:u.value,"onUpdate:value":i=>u.value=i},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),n.value.id?b("",!0):(m(),c(I,{key:0,title:e(t)("fields.engine")},{default:l(()=>[a(e(g),{cols:"1 640:2","x-gap":24},{default:l(()=>[a(e(r),{label:e(t)("fields.name"),path:"driver.name"},{default:l(()=>[a(e(d),{placeholder:e(t)("fields.name"),value:n.value.driver.name,"onUpdate:value":o[4]||(o[4]=s=>n.value.driver.name=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),a(e(r),{span:"3",label:e(t)("fields.options"),path:"driver.options"},{default:l(()=>[a(e(h),{value:n.value.driver.options,"onUpdate:value":o[5]||(o[5]=s=>n.value.driver.options=s),"on-create":f},{default:l(({index:s,value:u})=>[a(e(d),{placeholder:e(t)("fields.name"),value:u.name,"onUpdate:value":i=>u.name=i},null,8,["placeholder","value","onUpdate:value"]),L,a(e(d),{placeholder:e(t)("fields.value"),value:u.value,"onUpdate:value":i=>u.value=i},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title"])),n.value.id?b("",!0):(m(),c(I,{key:1,title:e(t)("fields.template"),subtitle:e(t)("tips.template")},{default:l(()=>[a(e(g),{cols:"1 640:2","x-gap":24},{default:l(()=>[a(e(r),{label:e(t)("fields.engine"),path:"templating.name"},{default:l(()=>[a(e(J),{value:n.value.templating.name,"onUpdate:value":o[6]||(o[6]=s=>n.value.templating.name=s)},{default:l(()=>[a(e(F),{key:"none",value:"none"},{default:l(()=>[O]),_:1}),a(e(F),{key:"golang",value:"golang"},{default:l(()=>[Y]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),a(e(r),{span:"3",label:e(t)("fields.options"),path:"templating.options"},{default:l(()=>[a(e(h),{value:n.value.templating.options,"onUpdate:value":o[7]||(o[7]=s=>n.value.templating.options=s),"on-create":f},{default:l(({index:s,value:u})=>[a(e(d),{placeholder:e(t)("fields.name"),value:u.name,"onUpdate:value":i=>u.name=i},null,8,["placeholder","value","onUpdate:value"]),Z,a(e(d),{placeholder:e(t)("fields.value"),value:u.value,"onUpdate:value":i=>u.value=i},null,8,["placeholder","value","onUpdate:value"])]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["title","subtitle"])),a(e(w),{onClick:q(e(S),["prevent"]),type:"primary",disabled:e(U),loading:e(U)},{icon:l(()=>[a(e(B),null,{default:l(()=>[a(e(j))]),_:1})]),default:l(()=>[v(" "+C(e(t)("buttons.save")),1)]),_:1},8,["onClick","disabled","loading"])]),_:1},8,["model"])]),_:1})],64))}});export{be as default};
