import{d as H,z as w,_ as le,k as ae,l as h,bk as _,bl as te,bm as V,J as X,bn as oe,bo as E,u as se,m as de,o as y,c as P,b as l,w as a,e,C as c,i as r,t as u,h as $,bp as R,aW as f,bq as ie,aY as ne,a as re,N as k,g as ue,O as T,f as pe,Q as fe,br as me,bs as ce,bt as S,bu as ve}from"./index.85d3582f.js";import{X as be}from"./PageHeader.556c52c2.js";import{X as F}from"./Panel.5fe42ab1.js";import{a as _e}from"./index.9d2bf9c2.js";import{N as v}from"./FormItemGridItem.2cbaea10.js";import{N as ge}from"./DynamicInput.74e0089b.js";import{N as he}from"./InputGroup.0f983dd9.js";import{C as we}from"./CopyOutline.e34332fe.js";import{S as U}from"./SaveOutline.608b2aa9.js";import{N as ye}from"./Alert.c18a4d49.js";import{s as q,N as A}from"./RadioGroup.5ac456f1.js";import{a as M}from"./Grid.4637279d.js";import"./hr.a93a0821.js";import"./Add.32836a6c.js";import"./Remove.e20fb71e.js";import"./ArrowDown.224587e2.js";var x=H({name:"RadioButton",props:q.props,setup(d){return q(d)},render(){const{mergedClsPrefix:d}=this;return w("label",{class:[`${d}-radio-button`,{[`${d}-radio-button--disabled`]:this.mergedDisabled,[`${d}-radio-button--checked`]:this.renderSafeChecked,[`${d}-radio-button--focus`]:this.focus}]},w("input",{ref:"inputRef",type:"radio",class:`${d}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),w("div",{class:`${d}-radio-button__state-border`}),w("span",{ref:"labelRef"},this.$slots))}});const ke=d=>(me("data-v-e1d52e12"),d=d(),ce(),d),xe={style:{padding:"4px 0 0 12px"}},Ne=ke(()=>$("div",{style:{height:"34px","line-height":"34px",margin:"0 8px"}},"=",-1)),Ce={key:0,style:{padding:"4px 0 0 12px"}},Ie={key:1,style:{padding:"4px 0 0 12px"}},Pe={style:{padding:"4px 0 0 12px"}},Re=r("\u4E2D\u6587"),Se=r("English"),Fe=H({setup(d){const{t}=ae(),p=h("");function N(m){p.value===m?p.value="":p.value=m}const n=h({}),J={name:_(),loginName:_(),email:[_(),te()]},B=h(),{submit:O,submiting:D}=V(B,()=>S.modifyProfile(n.value)),{copy:Q,copied:W,isSupported:Y}=_e(),i=X({showDlg:!1,old:"",new:"",confirm:""}),z=h(),j={old:_(),new:[_(),oe(6,15),E((m,o)=>o!==i.old,t("tips.password_new_rule"))],confirm:[_(),E((m,o)=>o===i.new,t("tips.password_confirm_rule"))]},{submit:K,submiting:G}=V(z,()=>S.modifyPassword({oldPwd:i.old,newPwd:i.new}),()=>{i.showDlg=!1,window.message.info(t("texts.action_success"))}),C=se(),b=X({locale:C.state.preference.locale,theme:C.state.preference.theme||"light"}),L=h();function Z(){C.commit(ve.SetPreference,b),window.message.info(t("texts.action_success")),setTimeout(()=>location.reload(),100)}async function ee(){let m=await S.find("");n.value=m.data}return de(ee),(m,o)=>(y(),P(fe,null,[l(be),l(e(pe),{class:"page-body",vertical:"",size:12},{default:a(()=>[l(F,{title:e(t)("fields.profile"),subtitle:e(t)("tips.profile"),divider:"bottom",collapsed:p.value!=="profile"},{action:a(()=>[l(e(c),{secondary:"",strong:"",class:"toggle",size:"small",onClick:o[0]||(o[0]=s=>N("profile"))},{default:a(()=>[r(u(p.value==="profile"?e(t)("buttons.collapse"):e(t)("buttons.expand")),1)]),_:1})]),default:a(()=>[$("div",xe,[l(e(R),{inline:"",model:n.value,rules:J,ref_key:"profileForm",ref:B},{default:a(()=>[l(e(M),{cols:"1 640:2","x-gap":24},{default:a(()=>[l(e(v),{label:e(t)("fields.username"),path:"name"},{default:a(()=>[l(e(f),{placeholder:e(t)("fields.username"),value:n.value.name,"onUpdate:value":o[1]||(o[1]=s=>n.value.name=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("fields.login_name"),path:"loginName"},{default:a(()=>[l(e(f),{placeholder:e(t)("fields.login_name"),value:n.value.loginName,"onUpdate:value":o[2]||(o[2]=s=>n.value.loginName=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("fields.email"),path:"email"},{default:a(()=>[l(e(f),{placeholder:e(t)("fields.email"),value:n.value.email,"onUpdate:value":o[3]||(o[3]=s=>n.value.email=s)},null,8,["placeholder","value"])]),_:1},8,["label"]),l(e(v),{label:e(t)("fields.tokens"),path:"tokens",span:"2"},{default:a(()=>[l(e(ge),{value:n.value.tokens,"onUpdate:value":o[4]||(o[4]=s=>n.value.tokens=s),"on-create":()=>({name:"",value:e(ie)()})},{default:a(({index:s,value:g})=>[l(e(f),{placeholder:e(t)("fields.name"),value:g.name,"onUpdate:value":I=>g.name=I,style:{width:"300px"}},null,8,["placeholder","value","onUpdate:value"]),Ne,l(e(he),null,{default:a(()=>[l(e(f),{placeholder:e(t)("fields.value"),value:g.value,"onUpdate:value":I=>g.value=I,readonly:""},null,8,["placeholder","value","onUpdate:value"]),l(e(ne),{trigger:"hover"},{trigger:a(()=>[e(Y)?(y(),re(e(c),{key:0,type:"default",onClick:()=>e(Q)(g.value)},{icon:a(()=>[l(e(k),null,{default:a(()=>[l(e(we))]),_:1})]),_:2},1032,["onClick"])):ue("",!0)]),default:a(()=>[r(" "+u(e(t)(e(W)?"tips.copied":"buttons.copy")),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["value","on-create"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),l(e(c),{type:"primary",disabled:e(D),loading:e(D),onClick:e(O)},{icon:a(()=>[l(e(k),null,{default:a(()=>[l(e(U))]),_:1})]),default:a(()=>[r(" "+u(e(t)("buttons.update")),1)]),_:1},8,["disabled","loading","onClick"])])]),_:1},8,["title","subtitle","collapsed"]),l(F,{title:e(t)("fields.password"),subtitle:e(t)("tips.password"),divider:"bottom",collapsed:p.value!=="password"},{action:a(()=>[l(e(c),{secondary:"",strong:"",size:"small",class:"toggle",onClick:o[5]||(o[5]=s=>N("password"))},{default:a(()=>[r(u(p.value==="password"?e(t)("buttons.collapse"):e(t)("buttons.expand")),1)]),_:1})]),default:a(()=>[n.value.type==="ldap"?(y(),P("div",Ce,[l(e(ye),{type:"info"},{default:a(()=>[r(u(e(t)("texts.password_notice")),1)]),_:1})])):(y(),P("div",Ie,[l(e(R),{model:e(i),ref_key:"passwordForm",ref:z,rules:j},{default:a(()=>[l(e(M),{cols:"1 640:3","x-gap":24},{default:a(()=>[l(e(v),{path:"old",label:e(t)("fields.password_old")},{default:a(()=>[l(e(f),{value:e(i).old,"onUpdate:value":o[6]||(o[6]=s=>e(i).old=s),type:"password",placeholder:e(t)("fields.password_old")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{first:"",path:"new",label:e(t)("fields.password_new")},{default:a(()=>[l(e(f),{value:e(i).new,"onUpdate:value":o[7]||(o[7]=s=>e(i).new=s),type:"password",placeholder:e(t)("fields.password_new")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(v),{first:"",path:"confirm",label:e(t)("fields.password_confirm")},{default:a(()=>[l(e(f),{disabled:!e(i).new,value:e(i).confirm,"onUpdate:value":o[8]||(o[8]=s=>e(i).confirm=s),type:"password",placeholder:e(t)("fields.password_confirm")},null,8,["disabled","value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),l(e(c),{type:"primary",disabled:e(G),loading:e(G),onClick:e(K)},{icon:a(()=>[l(e(k),null,{default:a(()=>[l(e(U))]),_:1})]),default:a(()=>[r(" "+u(e(t)("buttons.update")),1)]),_:1},8,["disabled","loading","onClick"])]))]),_:1},8,["title","subtitle","collapsed"]),l(F,{title:e(t)("fields.preferences"),subtitle:e(t)("tips.preference"),collapsed:p.value!=="preference"},{action:a(()=>[l(e(c),{secondary:"",strong:"",class:"toggle",size:"small",onClick:o[9]||(o[9]=s=>N("preference"))},{default:a(()=>[r(u(p.value==="preference"?e(t)("buttons.collapse"):e(t)("buttons.expand")),1)]),_:1})]),default:a(()=>[$("div",Pe,[l(e(R),{inline:"",model:e(b),ref_key:"preferenceForm",ref:L,"label-placement":"left"},{default:a(()=>[l(e(T),{label:e(t)("fields.language"),path:"locale"},{default:a(()=>[l(e(A),{value:e(b).locale,"onUpdate:value":o[10]||(o[10]=s=>e(b).locale=s)},{default:a(()=>[l(e(x),{value:"zh"},{default:a(()=>[Re]),_:1}),l(e(x),{value:"en"},{default:a(()=>[Se]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l(e(T),{label:e(t)("fields.theme"),path:"theme"},{default:a(()=>[l(e(A),{value:e(b).theme,"onUpdate:value":o[11]||(o[11]=s=>e(b).theme=s)},{default:a(()=>[l(e(x),{value:"light"},{default:a(()=>[r(u(e(t)("enums.light")),1)]),_:1}),l(e(x),{value:"dark"},{default:a(()=>[r(u(e(t)("enums.dark")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model"]),l(e(c),{type:"primary",onClick:Z},{icon:a(()=>[l(e(k),null,{default:a(()=>[l(e(U))]),_:1})]),default:a(()=>[r(" "+u(e(t)("buttons.save")),1)]),_:1})])]),_:1},8,["title","subtitle","collapsed"])]),_:1})],64))}});var Qe=le(Fe,[["__scopeId","data-v-e1d52e12"]]);export{Qe as default};
