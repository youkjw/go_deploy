import{_ as T,d as k,bX as S,o as p,c,b as r,w as n,r as $,e,f as b,D as g,R as P,n as U,k as q,bW as A,ca as D,J as X,bt as y,au as R,C as h,N as L,i as u,t as m,Q as z,T as W,aW as N}from"./index.85d3582f.js";import{X as E}from"./PageHeader.556c52c2.js";import{u as F}from"./data-table.6c22a710.js";import{r as H,a as J,e as Q,b as j}from"./render.edbb01fe.js";import{A as G}from"./AddOutline.f0719097.js";import{N as K}from"./DataTable.20b75ea0.js";import"./Anchor.d96a0ee7.js";import"./Tag.04c651c7.js";import"./Time.b1d0572f.js";import"./Popconfirm.ac7ac0d3.js";import"./ArrowDown.224587e2.js";import"./Checkbox.1898d3a6.js";import"./RadioGroup.5ac456f1.js";import"./Radio.10d2e386.js";import"./Select.60c05ccc.js";const M=k({setup(i){const t=S();return(o,f)=>(p(),c("div",{class:"tab",style:g({borderColor:e(t).dividerColor})},[r(e(b),{size:24},{default:n(()=>[$(o.$slots,"default",{},void 0,!0)]),_:3})],4))}});var O=T(M,[["__scopeId","data-v-6e442a42"]]);const Y=k({props:{active:{type:Boolean},title:null,href:null},setup(i){const t=S();return(o,f)=>(p(),c("div",{class:U(["tab-pane",{active:i.active}]),style:g({borderColor:e(t).primaryColor})},[r(e(P),{to:i.href,style:g({color:i.active?e(t).primaryColor:e(t).textColorBase})},{default:n(()=>[$(o.$slots,"default",{},void 0,!0)]),_:3},8,["to","style"])],6))}});var C=T(Y,[["__scopeId","data-v-68c9510d"]]);const fe=k({setup(i){const{t}=q(),o=A(),f=D(),d=X({name:"",loginName:""}),w=[{title:t("fields.id"),key:"id",render:a=>H({name:"user_detail",params:{id:a.id}},a.id)},{title:t("fields.name"),key:"name"},{title:t("fields.login_name"),key:"loginName"},{title:t("fields.email"),key:"email"},{title:t("fields.admin"),key:"admin",render:a=>t(a.admin?"enums.yes":"enums.no")},{title:t("fields.status"),key:"status",render:a=>J(a.status?t("enums.normal"):t("enums.blocked"),a.status?"success":"warning")},{title:t("fields.updated_at"),key:"updatedAt",render:a=>Q(a.updatedAt)},{title:t("fields.actions"),key:"actions",render(a,s){return j([a.status?{type:"warning",text:t("buttons.block"),action:()=>x(a,0),prompt:t("prompts.block")}:{type:"success",text:t("buttons.enable"),action:()=>x(a,1)},{type:"warning",text:t("buttons.edit"),action:()=>f.push({name:"user_edit",params:{id:a.id}})},{type:"error",text:t("buttons.delete"),action:()=>I(a,s),prompt:t("prompts.delete")}])}}],{state:_,pagination:V,fetchData:v,changePageSize:B}=F(y.search,()=>({...d,filter:o.query.filter}));async function x(a,s){await y.setStatus({id:a.id,status:s}),a.status=s}async function I(a,s){await y.delete(a.id,a.name),_.data.splice(s,1)}return R(()=>o.query.filter,(a,s)=>{v()}),(a,s)=>(p(),c(z,null,[r(E,null,{action:n(()=>[r(e(h),{secondary:"",size:"small",onClick:s[0]||(s[0]=l=>a.$router.push({name:"user_new"}))},{icon:n(()=>[r(e(L),null,{default:n(()=>[r(e(G))]),_:1})]),default:n(()=>[u(" "+m(e(t)("buttons.new")),1)]),_:1})]),_:1}),r(e(b),{class:"page-body",vertical:"",size:12},{default:n(()=>[r(e(O),null,{default:n(()=>[r(e(C),{href:{name:"user_list"},active:!a.$route.query.filter},{default:n(()=>[u(m(e(t)("fields.all")),1)]),_:1},8,["active"]),(p(),c(z,null,W(["admins","active","blocked"],l=>r(e(C),{href:{name:"user_list",query:{filter:l}},active:a.$route.query.filter===l},{default:n(()=>[u(m(e(t)("fields."+l)),1)]),_:2},1032,["href","active"])),64))]),_:1}),r(e(b),{size:12},{default:n(()=>[r(e(N),{size:"small",value:e(d).name,"onUpdate:value":s[1]||(s[1]=l=>e(d).name=l),placeholder:e(t)("fields.name"),clearable:""},null,8,["value","placeholder"]),r(e(N),{size:"small",value:e(d).loginName,"onUpdate:value":s[2]||(s[2]=l=>e(d).loginName=l),placeholder:e(t)("fields.login_name"),clearable:""},null,8,["value","placeholder"]),r(e(h),{size:"small",type:"primary",onClick:s[3]||(s[3]=()=>e(v)())},{default:n(()=>[u(m(e(t)("buttons.search")),1)]),_:1})]),_:1}),r(e(K),{remote:"","row-key":l=>l.name,size:"small",columns:w,data:e(_).data,pagination:e(V),loading:e(_).loading,"onUpdate:page":e(v),onUpdatePageSize:e(B),"scroll-x":"max-content"},null,8,["row-key","data","pagination","loading","onUpdate:page","onUpdatePageSize"])]),_:1})],64))}});export{fe as default};
