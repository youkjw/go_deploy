import{d as H,k as M,l as S,J as T,m as q,o as d,c as f,b as a,w as t,e,C as c,N as I,i as r,t as n,f as _,aW as V,h as i,Q as k,T as N,a as h,g as b}from"./index.85d3582f.js";import{X as x}from"./PageHeader.556c52c2.js";import{_ as C}from"./Anchor.d96a0ee7.js";import{s as p}from"./stack.df55745b.js";import{A as D}from"./AddOutline.f0719097.js";import{N as X}from"./Table.e4fc5dbd.js";import{N as j}from"./Tag.04c651c7.js";import{N as z}from"./Time.b1d0572f.js";import{N as g}from"./Popconfirm.ac7ac0d3.js";const R=H({setup(E){const{t:s}=M(),y=S([]),v=T({name:"",filter:""});async function P(o,u){await p.delete(o),y.value.splice(u,1)}async function $(o){await p.shutdown(o.name),o.services=[]}async function A(o){await p.deploy(o.name),o.services=[]}async function w(){let o=await p.search(v);y.value=o.data||[]}return q(w),(o,u)=>(d(),f(k,null,[a(x,null,{action:t(()=>[a(e(c),{secondary:"",size:"small",onClick:u[0]||(u[0]=l=>o.$router.push({name:"stack_new"}))},{icon:t(()=>[a(e(I),null,{default:t(()=>[a(e(D))]),_:1})]),default:t(()=>[r(" "+n(e(s)("buttons.new")),1)]),_:1})]),_:1}),a(e(_),{class:"page-body",vertical:"",size:12},{default:t(()=>[a(e(_),{size:12},{default:t(()=>[a(e(V),{size:"small",value:e(v).name,"onUpdate:value":u[1]||(u[1]=l=>e(v).name=l),placeholder:e(s)("fields.name"),clearable:""},null,8,["value","placeholder"]),a(e(c),{size:"small",type:"primary",onClick:u[2]||(u[2]=()=>w())},{default:t(()=>[r(n(e(s)("buttons.search")),1)]),_:1})]),_:1}),a(e(X),{size:"small",bordered:!0,"single-line":!1},{default:t(()=>[i("thead",null,[i("tr",null,[i("th",null,n(e(s)("fields.name")),1),i("th",null,n(e(s)("objects.service",{},2)),1),i("th",null,n(e(s)("fields.created_at")),1),i("th",null,n(e(s)("fields.updated_at")),1),i("th",null,n(e(s)("fields.actions")),1)])]),i("tbody",null,[(d(!0),f(k,null,N(y.value,(l,B)=>(d(),f("tr",{key:l.name},[i("td",null,[a(C,{url:{name:"stack_detail",params:{name:l.name}}},{default:t(()=>[r(n(l.name),1)]),_:2},1032,["url"])]),i("td",null,[l.services&&l.services.length?(d(),h(e(_),{key:0,size:4},{default:t(()=>[(d(!0),f(k,null,N(l.services,m=>(d(),h(e(j),{size:"small",type:"primary"},{default:t(()=>[a(C,{url:{name:"service_detail",params:{name:m}}},{default:t(()=>[r(n(m.substring(l.name.length+1)),1)]),_:2},1032,["url"])]),_:2},1024))),256))]),_:2},1024)):b("",!0)]),i("td",null,[a(e(z),{time:l.createdAt,format:"y-MM-dd HH:mm:ss"},null,8,["time"])]),i("td",null,[a(e(z),{time:l.updatedAt,format:"y-MM-dd HH:mm:ss"},null,8,["time"])]),i("td",null,[a(e(c),{size:"tiny",quaternary:"",type:"warning",onClick:m=>o.$router.push({name:"stack_edit",params:{name:l.name}})},{default:t(()=>[r(n(e(s)("buttons.edit")),1)]),_:2},1032,["onClick"]),a(e(g),{"show-icon":!1,onPositiveClick:m=>A(l)},{trigger:t(()=>[a(e(c),{size:"tiny",quaternary:"",type:"warning"},{default:t(()=>[r(n(e(s)("buttons.deploy")),1)]),_:1})]),default:t(()=>[r(" "+n(e(s)("prompts.deploy")),1)]),_:2},1032,["onPositiveClick"]),l.services&&l.services.length?(d(),h(e(g),{key:0,"show-icon":!1,onPositiveClick:m=>$(l)},{trigger:t(()=>[a(e(c),{size:"tiny",quaternary:"",type:"error"},{default:t(()=>[r(n(e(s)("buttons.shutdown")),1)]),_:1})]),default:t(()=>[r(" "+n(e(s)("prompts.shutdown")),1)]),_:2},1032,["onPositiveClick"])):b("",!0),a(e(g),{"show-icon":!1,onPositiveClick:m=>P(l.name,B)},{trigger:t(()=>[a(e(c),{size:"tiny",quaternary:"",type:"error"},{default:t(()=>[r(n(e(s)("buttons.delete")),1)]),_:1})]),default:t(()=>[r(" "+n(e(s)("prompts.delete")),1)]),_:2},1032,["onPositiveClick"])])]))),128))])]),_:1})]),_:1})],64))}});export{R as default};
